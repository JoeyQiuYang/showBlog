(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{228:function(s,e,t){"use strict";t.r(e);var a=t(3),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[s._v("#")]),s._v(" DNS")]),s._v(" "),t("blockquote",[t("p",[s._v("Stability: 2 - Stable")])]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("dns")]),s._v(" module contains functions belonging to two different categories:")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("Functions that use the underlying operating system facilities to perform\nname resolution, and that do not necessarily perform any network\ncommunication.\nThis category contains only one function: "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(". "),t("strong",[s._v("Developers\nlooking to perform name resolution in the same way that other applications\non the same operating system behave should use "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(".")])]),s._v(" "),t("p",[s._v("For example, looking up "),t("code",[s._v("iana.org")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ndns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'iana.org'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" family")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'address: %j family: IPv%s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" family"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// address: "192.0.43.8" family: IPv4')]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("Functions that connect to an actual DNS server to perform name resolution,\nand that "),t("em",[s._v("always")]),s._v(" use the network to perform DNS queries. This category\ncontains all functions in the "),t("code",[s._v("dns")]),s._v(" module "),t("em",[s._v("except")]),s._v(" "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(".\nThese functions do not use the same set of configuration files used by\n"),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" (e.g. "),t("code",[s._v("/etc/hosts")]),s._v("). These functions should be used by\ndevelopers who do not want to use the underlying operating system's\nfacilities for name resolution, and instead want to "),t("em",[s._v("always")]),s._v(" perform DNS\nqueries.")]),s._v(" "),t("p",[s._v("Below is an example that resolves "),t("code",[s._v("'archive.org'")]),s._v(" then reverse resolves the\nIP addresses that are returned.")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ndns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'archive.org'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("addresses: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reverse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hostnames")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("reverse for ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(": ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hostnames"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])]),s._v(" "),t("p",[s._v("There are subtle consequences in choosing one over the other, please consult\nthe "),t("a",{attrs:{href:"#dns_implementation_considerations"}},[s._v("Implementation considerations section")]),s._v(" for more information.")]),s._v(" "),t("h2",{attrs:{id:"class-dns-resolver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-dns-resolver"}},[s._v("#")]),s._v(" Class: dns.Resolver")]),s._v(" "),t("p",[s._v("An independent resolver for DNS requests.")]),s._v(" "),t("p",[s._v("Creating a new resolver uses the default server settings. Setting\nthe servers used for a resolver using\n"),t("a",{attrs:{href:"#dns_dns_setservers_servers"}},[t("code",[s._v("resolver.setServers()")])]),s._v(" does not affect\nother resolvers:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Resolver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resolver "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Resolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresolver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setServers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// This request will use the server at 4.4.4.4, independent of global settings.")]),s._v("\nresolver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.org'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("The following methods from the "),t("code",[s._v("dns")]),s._v(" module are available:")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#dns_dns_getservers"}},[t("code",[s._v("resolver.getServers()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolve_hostname_rrtype_callback"}},[t("code",[s._v("resolver.resolve()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolve4_hostname_options_callback"}},[t("code",[s._v("resolver.resolve4()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolve6_hostname_options_callback"}},[t("code",[s._v("resolver.resolve6()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolveany_hostname_callback"}},[t("code",[s._v("resolver.resolveAny()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvecname_hostname_callback"}},[t("code",[s._v("resolver.resolveCname()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvemx_hostname_callback"}},[t("code",[s._v("resolver.resolveMx()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvenaptr_hostname_callback"}},[t("code",[s._v("resolver.resolveNaptr()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvens_hostname_callback"}},[t("code",[s._v("resolver.resolveNs()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolveptr_hostname_callback"}},[t("code",[s._v("resolver.resolvePtr()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvesoa_hostname_callback"}},[t("code",[s._v("resolver.resolveSoa()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvesrv_hostname_callback"}},[t("code",[s._v("resolver.resolveSrv()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_resolvetxt_hostname_callback"}},[t("code",[s._v("resolver.resolveTxt()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_reverse_ip_callback"}},[t("code",[s._v("resolver.reverse()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dns_setservers_servers"}},[t("code",[s._v("resolver.setServers()")])])])]),s._v(" "),t("h3",{attrs:{id:"resolver-cancel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolver-cancel"}},[s._v("#")]),s._v(" resolver.cancel()")]),s._v(" "),t("p",[s._v("Cancel all outstanding DNS queries made by this resolver. The corresponding\ncallbacks will be called with an error with code "),t("code",[s._v("ECANCELLED")]),s._v(".")]),s._v(" "),t("h2",{attrs:{id:"dns-getservers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-getservers"}},[s._v("#")]),s._v(" dns.getServers()")]),s._v(" "),t("ul",[t("li",[s._v("Returns: {string[]}")])]),s._v(" "),t("p",[s._v("Returns an array of IP address strings, formatted according to "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(",\nthat are currently configured for DNS resolution. A string will include a port\nsection if a custom port is used.")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2001:4860:4860::8888'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4:1053'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]:1053'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h2",{attrs:{id:"dns-lookup-hostname-options-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-lookup-hostname-options-callback"}},[s._v("#")]),s._v(" dns.lookup(hostname[, options], callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {integer | Object}\n"),t("ul",[t("li",[t("code",[s._v("family")]),s._v(" {integer} The record family. Must be "),t("code",[s._v("4")]),s._v(", "),t("code",[s._v("6")]),s._v(", or "),t("code",[s._v("0")]),s._v(". The value\n"),t("code",[s._v("0")]),s._v(" indicates that IPv4 and IPv6 addresses are both returned. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("0")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("hints")]),s._v(" {number} One or more "),t("a",{attrs:{href:"#dns_supported_getaddrinfo_flags"}},[s._v("supported "),t("code",[s._v("getaddrinfo")]),s._v(" flags")]),s._v(". Multiple\nflags may be passed by bitwise "),t("code",[s._v("OR")]),s._v("ing their values.")]),s._v(" "),t("li",[t("code",[s._v("all")]),s._v(" {boolean} When "),t("code",[s._v("true")]),s._v(", the callback returns all resolved addresses in\nan array. Otherwise, returns a single address. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("false")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("verbatim")]),s._v(" {boolean} When "),t("code",[s._v("true")]),s._v(", the callback receives IPv4 and IPv6\naddresses in the order the DNS resolver returned them. When "),t("code",[s._v("false")]),s._v(",\nIPv4 addresses are placed before IPv6 addresses.\n"),t("strong",[s._v("Default:")]),s._v(" currently "),t("code",[s._v("false")]),s._v(" (addresses are reordered) but this is\nexpected to change in the not too distant future.\nNew code should use "),t("code",[s._v("{ verbatim: true }")]),s._v(".")])])]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("address")]),s._v(" {string} A string representation of an IPv4 or IPv6 address.")]),s._v(" "),t("li",[t("code",[s._v("family")]),s._v(" {integer} "),t("code",[s._v("4")]),s._v(" or "),t("code",[s._v("6")]),s._v(", denoting the family of "),t("code",[s._v("address")]),s._v(", or "),t("code",[s._v("0")]),s._v(" if\nthe address is not an IPv4 or IPv6 address. "),t("code",[s._v("0")]),s._v(" is a likely indicator of a\nbug in the name resolution service used by the operating system.")])])])]),s._v(" "),t("p",[s._v("Resolves a hostname (e.g. "),t("code",[s._v("'nodejs.org'")]),s._v(") into the first found A (IPv4) or\nAAAA (IPv6) record. All "),t("code",[s._v("option")]),s._v(" properties are optional. If "),t("code",[s._v("options")]),s._v(" is an\ninteger, then it must be "),t("code",[s._v("4")]),s._v(" or "),t("code",[s._v("6")]),s._v(" – if "),t("code",[s._v("options")]),s._v(" is not provided, then IPv4\nand IPv6 addresses are both returned if found.")]),s._v(" "),t("p",[s._v("With the "),t("code",[s._v("all")]),s._v(" option set to "),t("code",[s._v("true")]),s._v(", the arguments for "),t("code",[s._v("callback")]),s._v(" change to\n"),t("code",[s._v("(err, addresses)")]),s._v(", with "),t("code",[s._v("addresses")]),s._v(" being an array of objects with the\nproperties "),t("code",[s._v("address")]),s._v(" and "),t("code",[s._v("family")]),s._v(".")]),s._v(" "),t("p",[s._v("On error, "),t("code",[s._v("err")]),s._v(" is an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v(" is the error code.\nKeep in mind that "),t("code",[s._v("err.code")]),s._v(" will be set to "),t("code",[s._v("'ENOTFOUND'")]),s._v(" not only when\nthe hostname does not exist but also when the lookup fails in other ways\nsuch as no available file descriptors.")],1),s._v(" "),t("p",[t("code",[s._v("dns.lookup()")]),s._v(" does not necessarily have anything to do with the DNS protocol.\nThe implementation uses an operating system facility that can associate names\nwith addresses, and vice versa. This implementation can have subtle but\nimportant consequences on the behavior of any Node.js program. Please take some\ntime to consult the "),t("a",{attrs:{href:"#dns_implementation_considerations"}},[s._v("Implementation considerations section")]),s._v(" before using\n"),t("code",[s._v("dns.lookup()")]),s._v(".")]),s._v(" "),t("p",[s._v("Example usage:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" options "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  family"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hints"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ADDRCONFIG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("V4MAPPED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" family")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'address: %j family: IPv%s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" family"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// address: "2606:2800:220:1:248:1893:25c8:1946" family: IPv6')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// When options.all is true, the result will be an Array.")]),s._v("\noptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'addresses: %j'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// addresses: [{"address":"2606:2800:220:1:248:1893:25c8:1946","family":6}]')]),s._v("\n")])])]),t("p",[s._v("If this method is invoked as its "),t("router-link",{attrs:{to:"/node/util.html#util_util_promisify_original"}},[t("code",[s._v("util.promisify()")])]),s._v("ed version, and "),t("code",[s._v("all")]),s._v("\nis not set to "),t("code",[s._v("true")]),s._v(", it returns a "),t("code",[s._v("Promise")]),s._v(" for an "),t("code",[s._v("Object")]),s._v(" with "),t("code",[s._v("address")]),s._v(" and\n"),t("code",[s._v("family")]),s._v(" properties.")],1),s._v(" "),t("h3",{attrs:{id:"supported-getaddrinfo-flags"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#supported-getaddrinfo-flags"}},[s._v("#")]),s._v(" Supported getaddrinfo flags")]),s._v(" "),t("p",[s._v("The following flags can be passed as hints to "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(".")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("dns.ADDRCONFIG")]),s._v(": Returned address types are determined by the types\nof addresses supported by the current system. For example, IPv4 addresses\nare only returned if the current system has at least one IPv4 address\nconfigured. Loopback addresses are not considered.")]),s._v(" "),t("li",[t("code",[s._v("dns.V4MAPPED")]),s._v(": If the IPv6 family was specified, but no IPv6 addresses were\nfound, then return IPv4 mapped IPv6 addresses. It is not supported\non some operating systems (e.g FreeBSD 10.1).")])]),s._v(" "),t("h2",{attrs:{id:"dns-lookupservice-address-port-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-lookupservice-address-port-callback"}},[s._v("#")]),s._v(" dns.lookupService(address, port, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("address")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("port")]),s._v(" {number}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("hostname")]),s._v(" {string} e.g. "),t("code",[s._v("example.com")])]),s._v(" "),t("li",[t("code",[s._v("service")]),s._v(" {string} e.g. "),t("code",[s._v("http")])])])])]),s._v(" "),t("p",[s._v("Resolves the given "),t("code",[s._v("address")]),s._v(" and "),t("code",[s._v("port")]),s._v(" into a hostname and service using\nthe operating system's underlying "),t("code",[s._v("getnameinfo")]),s._v(" implementation.")]),s._v(" "),t("p",[s._v("If "),t("code",[s._v("address")]),s._v(" is not a valid IP address, a "),t("code",[s._v("TypeError")]),s._v(" will be thrown.\nThe "),t("code",[s._v("port")]),s._v(" will be coerced to a number. If it is not a legal port, a "),t("code",[s._v("TypeError")]),s._v("\nwill be thrown.")]),s._v(" "),t("p",[s._v("On an error, "),t("code",[s._v("err")]),s._v(" is an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v(" is the error code.")],1),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookupService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Prints: localhost ssh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("If this method is invoked as its "),t("router-link",{attrs:{to:"/node/util.html#util_util_promisify_original"}},[t("code",[s._v("util.promisify()")])]),s._v("ed version, it returns a\n"),t("code",[s._v("Promise")]),s._v(" for an "),t("code",[s._v("Object")]),s._v(" with "),t("code",[s._v("hostname")]),s._v(" and "),t("code",[s._v("service")]),s._v(" properties.")],1),s._v(" "),t("h2",{attrs:{id:"dns-resolve-hostname-rrtype-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolve-hostname-rrtype-callback"}},[s._v("#")]),s._v(" dns.resolve(hostname[, rrtype], callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("rrtype")]),s._v(" {string} Resource record type. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("'A'")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("records")]),s._v(" {string[] | Object[] | Object}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a hostname (e.g. "),t("code",[s._v("'nodejs.org'")]),s._v(") into an array\nof the resource records. The "),t("code",[s._v("callback")]),s._v(" function has arguments\n"),t("code",[s._v("(err, records)")]),s._v(". When successful, "),t("code",[s._v("records")]),s._v(" will be an array of resource\nrecords. The type and structure of individual results varies based on "),t("code",[s._v("rrtype")]),s._v(":")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("code",[s._v("rrtype")])]),s._v(" "),t("th",[t("code",[s._v("records")]),s._v(" contains")]),s._v(" "),t("th",[s._v("Result type")]),s._v(" "),t("th",[s._v("Shorthand method")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("'A'")])]),s._v(" "),t("td",[s._v("IPv4 addresses (default)")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolve4_hostname_options_callback"}},[t("code",[s._v("dns.resolve4()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'AAAA'")])]),s._v(" "),t("td",[s._v("IPv6 addresses")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolve6_hostname_options_callback"}},[t("code",[s._v("dns.resolve6()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'ANY'")])]),s._v(" "),t("td",[s._v("any records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolveany_hostname_callback"}},[t("code",[s._v("dns.resolveAny()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'CNAME'")])]),s._v(" "),t("td",[s._v("canonical name records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvecname_hostname_callback"}},[t("code",[s._v("dns.resolveCname()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'MX'")])]),s._v(" "),t("td",[s._v("mail exchange records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvemx_hostname_callback"}},[t("code",[s._v("dns.resolveMx()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NAPTR'")])]),s._v(" "),t("td",[s._v("name authority pointer records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvenaptr_hostname_callback"}},[t("code",[s._v("dns.resolveNaptr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NS'")])]),s._v(" "),t("td",[s._v("name server records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvens_hostname_callback"}},[t("code",[s._v("dns.resolveNs()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'PTR'")])]),s._v(" "),t("td",[s._v("pointer records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolveptr_hostname_callback"}},[t("code",[s._v("dns.resolvePtr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SOA'")])]),s._v(" "),t("td",[s._v("start of authority records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvesoa_hostname_callback"}},[t("code",[s._v("dns.resolveSoa()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SRV'")])]),s._v(" "),t("td",[s._v("service records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvesrv_hostname_callback"}},[t("code",[s._v("dns.resolveSrv()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'TXT'")])]),s._v(" "),t("td",[s._v("text records")]),s._v(" "),t("td",[s._v("{string[]}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dns_resolvetxt_hostname_callback"}},[t("code",[s._v("dns.resolveTxt()")])])])])])]),s._v(" "),t("p",[s._v("On error, "),t("code",[s._v("err")]),s._v(" is an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v(" is one of the\n"),t("a",{attrs:{href:"#dns_error_codes"}},[s._v("DNS error codes")]),s._v(".")],1),s._v(" "),t("h2",{attrs:{id:"dns-resolve4-hostname-options-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolve4-hostname-options-callback"}},[s._v("#")]),s._v(" dns.resolve4(hostname[, options], callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {Object}\n"),t("ul",[t("li",[t("code",[s._v("ttl")]),s._v(" {boolean} Retrieve the Time-To-Live value (TTL) of each record.\nWhen "),t("code",[s._v("true")]),s._v(", the callback receives an array of\n"),t("code",[s._v("{ address: '1.2.3.4', ttl: 60 }")]),s._v(" objects rather than an array of strings,\nwith the TTL expressed in seconds.")])])]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {string[] | Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a IPv4 addresses ("),t("code",[s._v("A")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function\nwill contain an array of IPv4 addresses (e.g.\n"),t("code",[s._v("['74.125.79.104', '74.125.79.105', '74.125.79.106']")]),s._v(").")]),s._v(" "),t("h2",{attrs:{id:"dns-resolve6-hostname-options-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolve6-hostname-options-callback"}},[s._v("#")]),s._v(" dns.resolve6(hostname[, options], callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {Object}\n"),t("ul",[t("li",[t("code",[s._v("ttl")]),s._v(" {boolean} Retrieve the Time-To-Live value (TTL) of each record.\nWhen "),t("code",[s._v("true")]),s._v(", the callback receives an array of\n"),t("code",[s._v("{ address: '0:1:2:3:4:5:6:7', ttl: 60 }")]),s._v(" objects rather than an array of\nstrings, with the TTL expressed in seconds.")])])]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {string[] | Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a IPv6 addresses ("),t("code",[s._v("AAAA")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function\nwill contain an array of IPv6 addresses.")]),s._v(" "),t("h2",{attrs:{id:"dns-resolveany-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolveany-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveAny(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("ret")]),s._v(" {Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve all records (also known as "),t("code",[s._v("ANY")]),s._v(" or "),t("code",[s._v("*")]),s._v(" query).\nThe "),t("code",[s._v("ret")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will be an array containing\nvarious types of records. Each object has a property "),t("code",[s._v("type")]),s._v(" that indicates the\ntype of the current record. And depending on the "),t("code",[s._v("type")]),s._v(", additional properties\nwill be present on the object:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Type")]),s._v(" "),t("th",[s._v("Properties")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("'A'")])]),s._v(" "),t("td",[t("code",[s._v("address")]),s._v("/"),t("code",[s._v("ttl")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'AAAA'")])]),s._v(" "),t("td",[t("code",[s._v("address")]),s._v("/"),t("code",[s._v("ttl")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'CNAME'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'MX'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dns_resolvemx_hostname_callback"}},[t("code",[s._v("dns.resolveMx()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NAPTR'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dns_resolvenaptr_hostname_callback"}},[t("code",[s._v("dns.resolveNaptr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NS'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'PTR'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SOA'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dns_resolvesoa_hostname_callback"}},[t("code",[s._v("dns.resolveSoa()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SRV'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dns_resolvesrv_hostname_callback"}},[t("code",[s._v("dns.resolveSrv()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'TXT'")])]),s._v(" "),t("td",[s._v("This type of record contains an array property called "),t("code",[s._v("entries")]),s._v(" which refers to "),t("a",{attrs:{href:"#dns_dns_resolvetxt_hostname_callback"}},[t("code",[s._v("dns.resolveTxt()")])]),s._v(", e.g. "),t("code",[s._v("{ entries: ['...'], type: 'TXT' }")])])])])]),s._v(" "),t("p",[s._v("Here is an example of the "),t("code",[s._v("ret")]),s._v(" object passed to the callback:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("299")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CNAME'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MX'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" exchange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alt4.aspmx.l.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NS'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns1.example.com'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TXT'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" entries"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'v=spf1 include:_spf.example.com ~all'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SOA'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    nsname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns1.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    hostmaster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    serial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("156696742")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    refresh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("900")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    retry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("900")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    expire"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    minttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("DNS server operators may choose not to respond to "),t("code",[s._v("ANY")]),s._v("\nqueries. It may be better to call individual methods like "),t("a",{attrs:{href:"#dns_dns_resolve4_hostname_options_callback"}},[t("code",[s._v("dns.resolve4()")])]),s._v(",\n"),t("a",{attrs:{href:"#dns_dns_resolvemx_hostname_callback"}},[t("code",[s._v("dns.resolveMx()")])]),s._v(", and so on. For more details, see "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc8482",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 8482"),t("OutboundLink")],1),s._v(".")]),s._v(" "),t("h2",{attrs:{id:"dns-resolvecname-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvecname-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveCname(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {string[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve "),t("code",[s._v("CNAME")]),s._v(" records for the "),t("code",[s._v("hostname")]),s._v(". The\n"),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function\nwill contain an array of canonical name records available for the "),t("code",[s._v("hostname")]),s._v("\n(e.g. "),t("code",[s._v("['bar.example.com']")]),s._v(").")]),s._v(" "),t("h2",{attrs:{id:"dns-resolvemx-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvemx-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveMx(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve mail exchange records ("),t("code",[s._v("MX")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will\ncontain an array of objects containing both a "),t("code",[s._v("priority")]),s._v(" and "),t("code",[s._v("exchange")]),s._v("\nproperty (e.g. "),t("code",[s._v("[{priority: 10, exchange: 'mx.example.com'}, ...]")]),s._v(").")]),s._v(" "),t("h2",{attrs:{id:"dns-resolvenaptr-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvenaptr-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveNaptr(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve regular expression based records ("),t("code",[s._v("NAPTR")]),s._v("\nrecords) for the "),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v("\nfunction will contain an array of objects with the following properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("flags")])]),s._v(" "),t("li",[t("code",[s._v("service")])]),s._v(" "),t("li",[t("code",[s._v("regexp")])]),s._v(" "),t("li",[t("code",[s._v("replacement")])]),s._v(" "),t("li",[t("code",[s._v("order")])]),s._v(" "),t("li",[t("code",[s._v("preference")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  flags"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SIP+D2U'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  regexp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  replacement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_sip._udp.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preference"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"dns-resolvens-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvens-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveNs(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {string[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve name server records ("),t("code",[s._v("NS")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will\ncontain an array of name server records available for "),t("code",[s._v("hostname")]),s._v("\n(e.g. "),t("code",[s._v("['ns1.example.com', 'ns2.example.com']")]),s._v(").")]),s._v(" "),t("h2",{attrs:{id:"dns-resolveptr-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolveptr-hostname-callback"}},[s._v("#")]),s._v(" dns.resolvePtr(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {string[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve pointer records ("),t("code",[s._v("PTR")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will\nbe an array of strings containing the reply records.")]),s._v(" "),t("h2",{attrs:{id:"dns-resolvesoa-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvesoa-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveSoa(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("address")]),s._v(" {Object}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a start of authority record ("),t("code",[s._v("SOA")]),s._v(" record) for\nthe "),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("address")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will\nbe an object with the following properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("nsname")])]),s._v(" "),t("li",[t("code",[s._v("hostmaster")])]),s._v(" "),t("li",[t("code",[s._v("serial")])]),s._v(" "),t("li",[t("code",[s._v("refresh")])]),s._v(" "),t("li",[t("code",[s._v("retry")])]),s._v(" "),t("li",[t("code",[s._v("expire")])]),s._v(" "),t("li",[t("code",[s._v("minttl")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  nsname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hostmaster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  serial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013101809")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  refresh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  retry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2400")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  expire"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("604800")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  minttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"dns-resolvesrv-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvesrv-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveSrv(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("addresses")]),s._v(" {Object[]}")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve service records ("),t("code",[s._v("SRV")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("addresses")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function will\nbe an array of objects with the following properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("priority")])]),s._v(" "),t("li",[t("code",[s._v("weight")])]),s._v(" "),t("li",[t("code",[s._v("port")])]),s._v(" "),t("li",[t("code",[s._v("name")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  weight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21223")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'service.example.com'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"dns-resolvetxt-hostname-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolvetxt-hostname-callback"}},[s._v("#")]),s._v(" dns.resolveTxt(hostname, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("records")]),s._v(" "),t("a",{staticClass:"type",attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type"}},[s._v("<string[][]>")])])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve text queries ("),t("code",[s._v("TXT")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". The "),t("code",[s._v("records")]),s._v(" argument passed to the "),t("code",[s._v("callback")]),s._v(" function is a\ntwo-dimensional array of the text records available for "),t("code",[s._v("hostname")]),s._v(" (e.g.\n"),t("code",[s._v("[ ['v=spf1 ip4:0.0.0.0 ', '~all' ] ]")]),s._v("). Each sub-array contains TXT chunks of\none record. Depending on the use case, these could be either joined together or\ntreated separately.")]),s._v(" "),t("h2",{attrs:{id:"dns-reverse-ip-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-reverse-ip-callback"}},[s._v("#")]),s._v(" dns.reverse(ip, callback)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("ip")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("callback")]),s._v(" {Function}\n"),t("ul",[t("li",[t("code",[s._v("err")]),s._v(" {Error}")]),s._v(" "),t("li",[t("code",[s._v("hostnames")]),s._v(" {string[]}")])])])]),s._v(" "),t("p",[s._v("Performs a reverse DNS query that resolves an IPv4 or IPv6 address to an\narray of hostnames.")]),s._v(" "),t("p",[s._v("On error, "),t("code",[s._v("err")]),s._v(" is an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v(" is\none of the "),t("a",{attrs:{href:"#dns_error_codes"}},[s._v("DNS error codes")]),s._v(".")],1),s._v(" "),t("h2",{attrs:{id:"dns-setservers-servers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-setservers-servers"}},[s._v("#")]),s._v(" dns.setServers(servers)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("servers")]),s._v(" {string[]} array of "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(" formatted addresses")])]),s._v(" "),t("p",[s._v("Sets the IP address and port of servers to be used when performing DNS\nresolution. The "),t("code",[s._v("servers")]),s._v(" argument is an array of "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(" formatted\naddresses. If the port is the IANA default DNS port (53) it can be omitted.")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setServers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4:1053'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]:1053'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("An error will be thrown if an invalid address is provided.")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("dns.setServers()")]),s._v(" method must not be called while a DNS query is in\nprogress.")]),s._v(" "),t("p",[s._v("The "),t("a",{attrs:{href:"#dns_dns_setservers_servers"}},[t("code",[s._v("dns.setServers()")])]),s._v(" method affects only "),t("a",{attrs:{href:"#dns_dns_resolve_hostname_rrtype_callback"}},[t("code",[s._v("dns.resolve()")])]),s._v(",\n"),t("code",[s._v("dns.resolve*()")]),s._v(" and "),t("a",{attrs:{href:"#dns_dns_reverse_ip_callback"}},[t("code",[s._v("dns.reverse()")])]),s._v(" (and specifically "),t("em",[s._v("not")]),s._v(" "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(").")]),s._v(" "),t("p",[s._v("This method works much like\n"),t("a",{attrs:{href:"http://man7.org/linux/man-pages/man5/resolv.conf.5.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("resolve.conf"),t("OutboundLink")],1),s._v(".\nThat is, if attempting to resolve with the first server provided results in a\n"),t("code",[s._v("NOTFOUND")]),s._v(" error, the "),t("code",[s._v("resolve()")]),s._v(" method will "),t("em",[s._v("not")]),s._v(" attempt to resolve with\nsubsequent servers provided. Fallback DNS servers will only be used if the\nearlier ones time out or result in some other error.")]),s._v(" "),t("h2",{attrs:{id:"dns-promises-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-promises-api"}},[s._v("#")]),s._v(" DNS Promises API")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("dns.promises")]),s._v(" API provides an alternative set of asynchronous DNS methods\nthat return "),t("code",[s._v("Promise")]),s._v(" objects rather than using callbacks. The API is accessible\nvia "),t("code",[s._v("require('dns').promises")]),s._v(".")]),s._v(" "),t("h3",{attrs:{id:"class-dnspromises-resolver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-dnspromises-resolver"}},[s._v("#")]),s._v(" Class: dnsPromises.Resolver")]),s._v(" "),t("p",[s._v("An independent resolver for DNS requests.")]),s._v(" "),t("p",[s._v("Creating a new resolver uses the default server settings. Setting\nthe servers used for a resolver using\n"),t("a",{attrs:{href:"#dns_dnspromises_setservers_servers"}},[t("code",[s._v("resolver.setServers()")])]),s._v(" does not affect\nother resolvers:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Resolver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("promises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resolver "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Resolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresolver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setServers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// This request will use the server at 4.4.4.4, independent of global settings.")]),s._v("\nresolver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.org'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Alternatively, the same code can be written using async-await style.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" addresses "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" resolver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.org'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("The following methods from the "),t("code",[s._v("dnsPromises")]),s._v(" API are available:")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#dns_dnspromises_getservers"}},[t("code",[s._v("resolver.getServers()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolve_hostname_rrtype"}},[t("code",[s._v("resolver.resolve()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolve4_hostname_options"}},[t("code",[s._v("resolver.resolve4()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolve6_hostname_options"}},[t("code",[s._v("resolver.resolve6()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolveany_hostname"}},[t("code",[s._v("resolver.resolveAny()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvecname_hostname"}},[t("code",[s._v("resolver.resolveCname()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvemx_hostname"}},[t("code",[s._v("resolver.resolveMx()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvenaptr_hostname"}},[t("code",[s._v("resolver.resolveNaptr()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvens_hostname"}},[t("code",[s._v("resolver.resolveNs()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolveptr_hostname"}},[t("code",[s._v("resolver.resolvePtr()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvesoa_hostname"}},[t("code",[s._v("resolver.resolveSoa()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvesrv_hostname"}},[t("code",[s._v("resolver.resolveSrv()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_resolvetxt_hostname"}},[t("code",[s._v("resolver.resolveTxt()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_reverse_ip"}},[t("code",[s._v("resolver.reverse()")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#dns_dnspromises_setservers_servers"}},[t("code",[s._v("resolver.setServers()")])])])]),s._v(" "),t("h3",{attrs:{id:"dnspromises-getservers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-getservers"}},[s._v("#")]),s._v(" dnsPromises.getServers()")]),s._v(" "),t("ul",[t("li",[s._v("Returns: {string[]}")])]),s._v(" "),t("p",[s._v("Returns an array of IP address strings, formatted according to "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(",\nthat are currently configured for DNS resolution. A string will include a port\nsection if a custom port is used.")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2001:4860:4860::8888'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4:1053'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]:1053'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-lookup-hostname-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-lookup-hostname-options"}},[s._v("#")]),s._v(" dnsPromises.lookup(hostname[, options])")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {integer | Object}\n"),t("ul",[t("li",[t("code",[s._v("family")]),s._v(" {integer} The record family. Must be "),t("code",[s._v("4")]),s._v(", "),t("code",[s._v("6")]),s._v(", or "),t("code",[s._v("0")]),s._v(". The value\n"),t("code",[s._v("0")]),s._v(" indicates that IPv4 and IPv6 addresses are both returned. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("0")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("hints")]),s._v(" {number} One or more "),t("a",{attrs:{href:"#dns_supported_getaddrinfo_flags"}},[s._v("supported "),t("code",[s._v("getaddrinfo")]),s._v(" flags")]),s._v(". Multiple\nflags may be passed by bitwise "),t("code",[s._v("OR")]),s._v("ing their values.")]),s._v(" "),t("li",[t("code",[s._v("all")]),s._v(" {boolean} When "),t("code",[s._v("true")]),s._v(", the "),t("code",[s._v("Promise")]),s._v(" is resolved with all addresses in\nan array. Otherwise, returns a single address. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("false")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("verbatim")]),s._v(" {boolean} When "),t("code",[s._v("true")]),s._v(", the "),t("code",[s._v("Promise")]),s._v(" is resolved with IPv4 and\nIPv6 addresses in the order the DNS resolver returned them. When "),t("code",[s._v("false")]),s._v(",\nIPv4 addresses are placed before IPv6 addresses.\n"),t("strong",[s._v("Default:")]),s._v(" currently "),t("code",[s._v("false")]),s._v(" (addresses are reordered) but this is\nexpected to change in the not too distant future.\nNew code should use "),t("code",[s._v("{ verbatim: true }")]),s._v(".")])])])]),s._v(" "),t("p",[s._v("Resolves a hostname (e.g. "),t("code",[s._v("'nodejs.org'")]),s._v(") into the first found A (IPv4) or\nAAAA (IPv6) record. All "),t("code",[s._v("option")]),s._v(" properties are optional. If "),t("code",[s._v("options")]),s._v(" is an\ninteger, then it must be "),t("code",[s._v("4")]),s._v(" or "),t("code",[s._v("6")]),s._v(" – if "),t("code",[s._v("options")]),s._v(" is not provided, then IPv4\nand IPv6 addresses are both returned if found.")]),s._v(" "),t("p",[s._v("With the "),t("code",[s._v("all")]),s._v(" option set to "),t("code",[s._v("true")]),s._v(", the "),t("code",[s._v("Promise")]),s._v(" is resolved with "),t("code",[s._v("addresses")]),s._v("\nbeing an array of objects with the properties "),t("code",[s._v("address")]),s._v(" and "),t("code",[s._v("family")]),s._v(".")]),s._v(" "),t("p",[s._v("On error, the "),t("code",[s._v("Promise")]),s._v(" is rejected with an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v("\nis the error code.\nKeep in mind that "),t("code",[s._v("err.code")]),s._v(" will be set to "),t("code",[s._v("'ENOTFOUND'")]),s._v(" not only when\nthe hostname does not exist but also when the lookup fails in other ways\nsuch as no available file descriptors.")],1),s._v(" "),t("p",[t("a",{attrs:{href:"#dns_dnspromises_lookup_hostname_options"}},[t("code",[s._v("dnsPromises.lookup()")])]),s._v(" does not necessarily have anything to do with the DNS\nprotocol. The implementation uses an operating system facility that can\nassociate names with addresses, and vice versa. This implementation can have\nsubtle but important consequences on the behavior of any Node.js program. Please\ntake some time to consult the "),t("a",{attrs:{href:"#dns_implementation_considerations"}},[s._v("Implementation considerations section")]),s._v(" before\nusing "),t("code",[s._v("dnsPromises.lookup()")]),s._v(".")]),s._v(" "),t("p",[s._v("Example usage:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dnsPromises "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("promises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" options "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  family"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hints"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ADDRCONFIG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("V4MAPPED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ndnsPromises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'address: %j family: IPv%s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("family"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// address: "2606:2800:220:1:248:1893:25c8:1946" family: IPv6')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// When options.all is true, the result will be an Array.")]),s._v("\noptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndnsPromises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'addresses: %j'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// addresses: [{"address":"2606:2800:220:1:248:1893:25c8:1946","family":6}]')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-lookupservice-address-port"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-lookupservice-address-port"}},[s._v("#")]),s._v(" dnsPromises.lookupService(address, port)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("address")]),s._v(" {string}")]),s._v(" "),t("li",[t("code",[s._v("port")]),s._v(" {number}")])]),s._v(" "),t("p",[s._v("Resolves the given "),t("code",[s._v("address")]),s._v(" and "),t("code",[s._v("port")]),s._v(" into a hostname and service using\nthe operating system's underlying "),t("code",[s._v("getnameinfo")]),s._v(" implementation.")]),s._v(" "),t("p",[s._v("If "),t("code",[s._v("address")]),s._v(" is not a valid IP address, a "),t("code",[s._v("TypeError")]),s._v(" will be thrown.\nThe "),t("code",[s._v("port")]),s._v(" will be coerced to a number. If it is not a legal port, a "),t("code",[s._v("TypeError")]),s._v("\nwill be thrown.")]),s._v(" "),t("p",[s._v("On error, the "),t("code",[s._v("Promise")]),s._v(" is rejected with an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v("\nis the error code.")],1),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dnsPromises "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dns'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("promises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndnsPromises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lookupService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Prints: localhost ssh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-resolve-hostname-rrtype"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolve-hostname-rrtype"}},[s._v("#")]),s._v(" dnsPromises.resolve(hostname[, rrtype])")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("rrtype")]),s._v(" {string} Resource record type. "),t("strong",[s._v("Default:")]),s._v(" "),t("code",[s._v("'A'")]),s._v(".")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a hostname (e.g. "),t("code",[s._v("'nodejs.org'")]),s._v(") into an array\nof the resource records. When successful, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an\narray of resource records. The type and structure of individual results vary\nbased on "),t("code",[s._v("rrtype")]),s._v(":")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("code",[s._v("rrtype")])]),s._v(" "),t("th",[t("code",[s._v("records")]),s._v(" contains")]),s._v(" "),t("th",[s._v("Result type")]),s._v(" "),t("th",[s._v("Shorthand method")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("'A'")])]),s._v(" "),t("td",[s._v("IPv4 addresses (default)")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolve4_hostname_options"}},[t("code",[s._v("dnsPromises.resolve4()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'AAAA'")])]),s._v(" "),t("td",[s._v("IPv6 addresses")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolve6_hostname_options"}},[t("code",[s._v("dnsPromises.resolve6()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'ANY'")])]),s._v(" "),t("td",[s._v("any records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolveany_hostname"}},[t("code",[s._v("dnsPromises.resolveAny()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'CNAME'")])]),s._v(" "),t("td",[s._v("canonical name records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvecname_hostname"}},[t("code",[s._v("dnsPromises.resolveCname()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'MX'")])]),s._v(" "),t("td",[s._v("mail exchange records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvemx_hostname"}},[t("code",[s._v("dnsPromises.resolveMx()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NAPTR'")])]),s._v(" "),t("td",[s._v("name authority pointer records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvenaptr_hostname"}},[t("code",[s._v("dnsPromises.resolveNaptr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NS'")])]),s._v(" "),t("td",[s._v("name server records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvens_hostname"}},[t("code",[s._v("dnsPromises.resolveNs()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'PTR'")])]),s._v(" "),t("td",[s._v("pointer records")]),s._v(" "),t("td",[s._v("{string}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolveptr_hostname"}},[t("code",[s._v("dnsPromises.resolvePtr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SOA'")])]),s._v(" "),t("td",[s._v("start of authority records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvesoa_hostname"}},[t("code",[s._v("dnsPromises.resolveSoa()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SRV'")])]),s._v(" "),t("td",[s._v("service records")]),s._v(" "),t("td",[s._v("{Object}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvesrv_hostname"}},[t("code",[s._v("dnsPromises.resolveSrv()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'TXT'")])]),s._v(" "),t("td",[s._v("text records")]),s._v(" "),t("td",[s._v("{string[]}")]),s._v(" "),t("td",[t("a",{attrs:{href:"#dns_dnspromises_resolvetxt_hostname"}},[t("code",[s._v("dnsPromises.resolveTxt()")])])])])])]),s._v(" "),t("p",[s._v("On error, the "),t("code",[s._v("Promise")]),s._v(" is rejected with an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v("\nis one of the "),t("a",{attrs:{href:"#dns_error_codes"}},[s._v("DNS error codes")]),s._v(".")],1),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolve4-hostname-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolve4-hostname-options"}},[s._v("#")]),s._v(" dnsPromises.resolve4(hostname[, options])")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {Object}\n"),t("ul",[t("li",[t("code",[s._v("ttl")]),s._v(" {boolean} Retrieve the Time-To-Live value (TTL) of each record.\nWhen "),t("code",[s._v("true")]),s._v(", the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of\n"),t("code",[s._v("{ address: '1.2.3.4', ttl: 60 }")]),s._v(" objects rather than an array of strings,\nwith the TTL expressed in seconds.")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve IPv4 addresses ("),t("code",[s._v("A")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of IPv4\naddresses (e.g. "),t("code",[s._v("['74.125.79.104', '74.125.79.105', '74.125.79.106']")]),s._v(").")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolve6-hostname-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolve6-hostname-options"}},[s._v("#")]),s._v(" dnsPromises.resolve6(hostname[, options])")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string} Hostname to resolve.")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" {Object}\n"),t("ul",[t("li",[t("code",[s._v("ttl")]),s._v(" {boolean} Retrieve the Time-To-Live value (TTL) of each record.\nWhen "),t("code",[s._v("true")]),s._v(", the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of\n"),t("code",[s._v("{ address: '0:1:2:3:4:5:6:7', ttl: 60 }")]),s._v(" objects rather than an array of\nstrings, with the TTL expressed in seconds.")])])])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve IPv6 addresses ("),t("code",[s._v("AAAA")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of IPv6\naddresses.")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolveany-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolveany-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveAny(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve all records (also known as "),t("code",[s._v("ANY")]),s._v(" or "),t("code",[s._v("*")]),s._v(" query).\nOn success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array containing various types of\nrecords. Each object has a property "),t("code",[s._v("type")]),s._v(" that indicates the type of the\ncurrent record. And depending on the "),t("code",[s._v("type")]),s._v(", additional properties will be\npresent on the object:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Type")]),s._v(" "),t("th",[s._v("Properties")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("'A'")])]),s._v(" "),t("td",[t("code",[s._v("address")]),s._v("/"),t("code",[s._v("ttl")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'AAAA'")])]),s._v(" "),t("td",[t("code",[s._v("address")]),s._v("/"),t("code",[s._v("ttl")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'CNAME'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'MX'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dnspromises_resolvemx_hostname"}},[t("code",[s._v("dnsPromises.resolveMx()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NAPTR'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dnspromises_resolvenaptr_hostname"}},[t("code",[s._v("dnsPromises.resolveNaptr()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'NS'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'PTR'")])]),s._v(" "),t("td",[t("code",[s._v("value")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SOA'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dnspromises_resolvesoa_hostname"}},[t("code",[s._v("dnsPromises.resolveSoa()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'SRV'")])]),s._v(" "),t("td",[s._v("Refer to "),t("a",{attrs:{href:"#dns_dnspromises_resolvesrv_hostname"}},[t("code",[s._v("dnsPromises.resolveSrv()")])])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("'TXT'")])]),s._v(" "),t("td",[s._v("This type of record contains an array property called "),t("code",[s._v("entries")]),s._v(" which refers to "),t("a",{attrs:{href:"#dns_dnspromises_resolvetxt_hostname"}},[t("code",[s._v("dnsPromises.resolveTxt()")])]),s._v(", e.g. "),t("code",[s._v("{ entries: ['...'], type: 'TXT' }")])])])])]),s._v(" "),t("p",[s._v("Here is an example of the result object:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("299")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CNAME'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MX'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" exchange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alt4.aspmx.l.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NS'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns1.example.com'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TXT'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" entries"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'v=spf1 include:_spf.example.com ~all'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SOA'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    nsname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns1.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    hostmaster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    serial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("156696742")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    refresh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("900")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    retry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("900")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    expire"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    minttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-resolvecname-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvecname-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveCname(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve "),t("code",[s._v("CNAME")]),s._v(" records for the "),t("code",[s._v("hostname")]),s._v(". On success,\nthe "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of canonical name records available for\nthe "),t("code",[s._v("hostname")]),s._v(" (e.g. "),t("code",[s._v("['bar.example.com']")]),s._v(").")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolvemx-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvemx-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveMx(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve mail exchange records ("),t("code",[s._v("MX")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of objects\ncontaining both a "),t("code",[s._v("priority")]),s._v(" and "),t("code",[s._v("exchange")]),s._v(" property (e.g.\n"),t("code",[s._v("[{priority: 10, exchange: 'mx.example.com'}, ...]")]),s._v(").")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolvenaptr-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvenaptr-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveNaptr(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve regular expression based records ("),t("code",[s._v("NAPTR")]),s._v("\nrecords) for the "),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array\nof objects with the following properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("flags")])]),s._v(" "),t("li",[t("code",[s._v("service")])]),s._v(" "),t("li",[t("code",[s._v("regexp")])]),s._v(" "),t("li",[t("code",[s._v("replacement")])]),s._v(" "),t("li",[t("code",[s._v("order")])]),s._v(" "),t("li",[t("code",[s._v("preference")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  flags"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SIP+D2U'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  regexp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  replacement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_sip._udp.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  preference"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-resolvens-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvens-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveNs(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve name server records ("),t("code",[s._v("NS")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of name server\nrecords available for "),t("code",[s._v("hostname")]),s._v(" (e.g.\n"),t("code",[s._v("['ns1.example.com', 'ns2.example.com']")]),s._v(").")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolveptr-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolveptr-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolvePtr(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve pointer records ("),t("code",[s._v("PTR")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of strings\ncontaining the reply records.")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-resolvesoa-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvesoa-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveSoa(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve a start of authority record ("),t("code",[s._v("SOA")]),s._v(" record) for\nthe "),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an object with the\nfollowing properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("nsname")])]),s._v(" "),t("li",[t("code",[s._v("hostmaster")])]),s._v(" "),t("li",[t("code",[s._v("serial")])]),s._v(" "),t("li",[t("code",[s._v("refresh")])]),s._v(" "),t("li",[t("code",[s._v("retry")])]),s._v(" "),t("li",[t("code",[s._v("expire")])]),s._v(" "),t("li",[t("code",[s._v("minttl")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  nsname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ns.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hostmaster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root.example.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  serial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013101809")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  refresh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  retry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2400")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  expire"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("604800")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  minttl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-resolvesrv-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvesrv-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveSrv(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve service records ("),t("code",[s._v("SRV")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with an array of objects with\nthe following properties:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("priority")])]),s._v(" "),t("li",[t("code",[s._v("weight")])]),s._v(" "),t("li",[t("code",[s._v("port")])]),s._v(" "),t("li",[t("code",[s._v("name")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  weight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21223")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'service.example.com'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"dnspromises-resolvetxt-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-resolvetxt-hostname"}},[s._v("#")]),s._v(" dnsPromises.resolveTxt(hostname)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hostname")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Uses the DNS protocol to resolve text queries ("),t("code",[s._v("TXT")]),s._v(" records) for the\n"),t("code",[s._v("hostname")]),s._v(". On success, the "),t("code",[s._v("Promise")]),s._v(" is resolved with a two-dimensional array\nof the text records available for "),t("code",[s._v("hostname")]),s._v(" (e.g.\n"),t("code",[s._v("[ ['v=spf1 ip4:0.0.0.0 ', '~all' ] ]")]),s._v("). Each sub-array contains TXT chunks of\none record. Depending on the use case, these could be either joined together or\ntreated separately.")]),s._v(" "),t("h3",{attrs:{id:"dnspromises-reverse-ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-reverse-ip"}},[s._v("#")]),s._v(" dnsPromises.reverse(ip)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("ip")]),s._v(" {string}")])]),s._v(" "),t("p",[s._v("Performs a reverse DNS query that resolves an IPv4 or IPv6 address to an\narray of hostnames.")]),s._v(" "),t("p",[s._v("On error, the "),t("code",[s._v("Promise")]),s._v(" is rejected with an "),t("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[t("code",[s._v("Error")])]),s._v(" object, where "),t("code",[s._v("err.code")]),s._v("\nis one of the "),t("a",{attrs:{href:"#dns_error_codes"}},[s._v("DNS error codes")]),s._v(".")],1),s._v(" "),t("h3",{attrs:{id:"dnspromises-setservers-servers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dnspromises-setservers-servers"}},[s._v("#")]),s._v(" dnsPromises.setServers(servers)")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("servers")]),s._v(" {string[]} array of "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(" formatted addresses")])]),s._v(" "),t("p",[s._v("Sets the IP address and port of servers to be used when performing DNS\nresolution. The "),t("code",[s._v("servers")]),s._v(" argument is an array of "),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("RFC 5952"),t("OutboundLink")],1),s._v(" formatted\naddresses. If the port is the IANA default DNS port (53) it can be omitted.")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("dnsPromises"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setServers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4.4.4.4:1053'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2001:4860:4860::8888]:1053'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("An error will be thrown if an invalid address is provided.")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("dnsPromises.setServers()")]),s._v(" method must not be called while a DNS query is in\nprogress.")]),s._v(" "),t("p",[s._v("This method works much like\n"),t("a",{attrs:{href:"http://man7.org/linux/man-pages/man5/resolv.conf.5.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("resolve.conf"),t("OutboundLink")],1),s._v(".\nThat is, if attempting to resolve with the first server provided results in a\n"),t("code",[s._v("NOTFOUND")]),s._v(" error, the "),t("code",[s._v("resolve()")]),s._v(" method will "),t("em",[s._v("not")]),s._v(" attempt to resolve with\nsubsequent servers provided. Fallback DNS servers will only be used if the\nearlier ones time out or result in some other error.")]),s._v(" "),t("h2",{attrs:{id:"error-codes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#error-codes"}},[s._v("#")]),s._v(" Error codes")]),s._v(" "),t("p",[s._v("Each DNS query can return one of the following error codes:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("dns.NODATA")]),s._v(": DNS server returned answer with no data.")]),s._v(" "),t("li",[t("code",[s._v("dns.FORMERR")]),s._v(": DNS server claims query was misformatted.")]),s._v(" "),t("li",[t("code",[s._v("dns.SERVFAIL")]),s._v(": DNS server returned general failure.")]),s._v(" "),t("li",[t("code",[s._v("dns.NOTFOUND")]),s._v(": Domain name not found.")]),s._v(" "),t("li",[t("code",[s._v("dns.NOTIMP")]),s._v(": DNS server does not implement requested operation.")]),s._v(" "),t("li",[t("code",[s._v("dns.REFUSED")]),s._v(": DNS server refused query.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADQUERY")]),s._v(": Misformatted DNS query.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADNAME")]),s._v(": Misformatted hostname.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADFAMILY")]),s._v(": Unsupported address family.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADRESP")]),s._v(": Misformatted DNS reply.")]),s._v(" "),t("li",[t("code",[s._v("dns.CONNREFUSED")]),s._v(": Could not contact DNS servers.")]),s._v(" "),t("li",[t("code",[s._v("dns.TIMEOUT")]),s._v(": Timeout while contacting DNS servers.")]),s._v(" "),t("li",[t("code",[s._v("dns.EOF")]),s._v(": End of file.")]),s._v(" "),t("li",[t("code",[s._v("dns.FILE")]),s._v(": Error reading file.")]),s._v(" "),t("li",[t("code",[s._v("dns.NOMEM")]),s._v(": Out of memory.")]),s._v(" "),t("li",[t("code",[s._v("dns.DESTRUCTION")]),s._v(": Channel is being destroyed.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADSTR")]),s._v(": Misformatted string.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADFLAGS")]),s._v(": Illegal flags specified.")]),s._v(" "),t("li",[t("code",[s._v("dns.NONAME")]),s._v(": Given hostname is not numeric.")]),s._v(" "),t("li",[t("code",[s._v("dns.BADHINTS")]),s._v(": Illegal hints flags specified.")]),s._v(" "),t("li",[t("code",[s._v("dns.NOTINITIALIZED")]),s._v(": c-ares library initialization not yet performed.")]),s._v(" "),t("li",[t("code",[s._v("dns.LOADIPHLPAPI")]),s._v(": Error loading "),t("code",[s._v("iphlpapi.dll")]),s._v(".")]),s._v(" "),t("li",[t("code",[s._v("dns.ADDRGETNETWORKPARAMS")]),s._v(": Could not find "),t("code",[s._v("GetNetworkParams")]),s._v(" function.")]),s._v(" "),t("li",[t("code",[s._v("dns.CANCELLED")]),s._v(": DNS query cancelled.")])]),s._v(" "),t("h2",{attrs:{id:"implementation-considerations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#implementation-considerations"}},[s._v("#")]),s._v(" Implementation considerations")]),s._v(" "),t("p",[s._v("Although "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" and the various "),t("code",[s._v("dns.resolve*()/dns.reverse()")]),s._v("\nfunctions have the same goal of associating a network name with a network\naddress (or vice versa), their behavior is quite different. These differences\ncan have subtle but significant consequences on the behavior of Node.js\nprograms.")]),s._v(" "),t("h3",{attrs:{id:"dns-lookup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-lookup"}},[s._v("#")]),s._v(" "),t("code",[s._v("dns.lookup()")])]),s._v(" "),t("p",[s._v("Under the hood, "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" uses the same operating system facilities\nas most other programs. For instance, "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" will almost always\nresolve a given name the same way as the "),t("code",[s._v("ping")]),s._v(" command. On most POSIX-like\noperating systems, the behavior of the "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" function can be\nmodified by changing settings in nsswitch.conf(5) and/or resolv.conf(5),\nbut changing these files will change the behavior of all other\nprograms running on the same operating system.")]),s._v(" "),t("p",[s._v("Though the call to "),t("code",[s._v("dns.lookup()")]),s._v(" will be asynchronous from JavaScript's\nperspective, it is implemented as a synchronous call to getaddrinfo(3) that runs\non libuv's threadpool. This can have surprising negative performance\nimplications for some applications, see the "),t("router-link",{attrs:{to:"/node/cli.html#cli_uv_threadpool_size_size"}},[t("code",[s._v("UV_THREADPOOL_SIZE")])]),s._v("\ndocumentation for more information.")],1),s._v(" "),t("p",[s._v("Various networking APIs will call "),t("code",[s._v("dns.lookup()")]),s._v(" internally to resolve\nhost names. If that is an issue, consider resolving the hostname to an address\nusing "),t("code",[s._v("dns.resolve()")]),s._v(" and using the address instead of a host name. Also, some\nnetworking APIs (such as "),t("router-link",{attrs:{to:"/node/net.html#net_socket_connect_options_connectlistener"}},[t("code",[s._v("socket.connect()")])]),s._v(" and "),t("router-link",{attrs:{to:"/node/dgram.html#dgram_dgram_createsocket_options_callback"}},[t("code",[s._v("dgram.createSocket()")])]),s._v(")\nallow the default resolver, "),t("code",[s._v("dns.lookup()")]),s._v(", to be replaced.")],1),s._v(" "),t("h3",{attrs:{id:"dns-resolve-dns-resolve-and-dns-reverse"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-resolve-dns-resolve-and-dns-reverse"}},[s._v("#")]),s._v(" "),t("code",[s._v("dns.resolve()")]),s._v(", "),t("code",[s._v("dns.resolve*()")]),s._v(" and "),t("code",[s._v("dns.reverse()")])]),s._v(" "),t("p",[s._v("These functions are implemented quite differently than "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(". They\ndo not use getaddrinfo(3) and they "),t("em",[s._v("always")]),s._v(" perform a DNS query on the\nnetwork. This network communication is always done asynchronously, and does not\nuse libuv's threadpool.")]),s._v(" "),t("p",[s._v("As a result, these functions cannot have the same negative impact on other\nprocessing that happens on libuv's threadpool that "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v(" can have.")]),s._v(" "),t("p",[s._v("They do not use the same set of configuration files than what "),t("a",{attrs:{href:"#dns_dns_lookup_hostname_options_callback"}},[t("code",[s._v("dns.lookup()")])]),s._v("\nuses. For instance, "),t("em",[s._v("they do not use the configuration from "),t("code",[s._v("/etc/hosts")])]),s._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);