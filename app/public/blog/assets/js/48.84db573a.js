(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{270:function(t,s,e){"use strict";e.r(s);var a=e(3),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"repl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#repl"}},[t._v("#")]),t._v(" REPL")]),t._v(" "),e("blockquote",[e("p",[t._v("Stability: 2 - Stable")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("repl")]),t._v(" module provides a Read-Eval-Print-Loop (REPL) implementation that\nis available both as a standalone program or includible in other applications.\nIt can be accessed using:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"design-and-features"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#design-and-features"}},[t._v("#")]),t._v(" Design and Features")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("repl")]),t._v(" module exports the "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" class. While running,\ninstances of "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" will accept individual lines of user input,\nevaluate those according to a user-defined evaluation function, then output the\nresult. Input and output may be from "),e("code",[t._v("stdin")]),t._v(" and "),e("code",[t._v("stdout")]),t._v(", respectively, or may\nbe connected to any Node.js "),e("router-link",{attrs:{to:"/node/stream.html"}},[t._v("stream")]),t._v(".")],1),t._v(" "),e("p",[t._v("Instances of "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" support automatic completion of inputs,\nsimplistic Emacs-style line editing, multi-line inputs, ANSI-styled output,\nsaving and restoring current REPL session state, error recovery, and\ncustomizable evaluation functions.")]),t._v(" "),e("h3",{attrs:{id:"commands-and-special-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands-and-special-keys"}},[t._v("#")]),t._v(" Commands and Special Keys")]),t._v(" "),e("p",[t._v("The following special commands are supported by all REPL instances:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v(".break")]),t._v(": When in the process of inputting a multi-line expression, entering\nthe "),e("code",[t._v(".break")]),t._v(" command (or pressing the "),e("code",[t._v("<ctrl>-C")]),t._v(" key combination) will abort\nfurther input or processing of that expression.")]),t._v(" "),e("li",[e("code",[t._v(".clear")]),t._v(": Resets the REPL "),e("code",[t._v("context")]),t._v(" to an empty object and clears any\nmulti-line expression currently being input.")]),t._v(" "),e("li",[e("code",[t._v(".exit")]),t._v(": Close the I/O stream, causing the REPL to exit.")]),t._v(" "),e("li",[e("code",[t._v(".help")]),t._v(": Show this list of special commands.")]),t._v(" "),e("li",[e("code",[t._v(".save")]),t._v(": Save the current REPL session to a file:\n"),e("code",[t._v("> .save ./file/to/save.js")])]),t._v(" "),e("li",[e("code",[t._v(".load")]),t._v(": Load a file into the current REPL session.\n"),e("code",[t._v("> .load ./file/to/load.js")])]),t._v(" "),e("li",[e("code",[t._v(".editor")]),t._v(": Enter editor mode ("),e("code",[t._v("<ctrl>-D")]),t._v(" to finish, "),e("code",[t._v("<ctrl>-C")]),t._v(" to cancel).")])]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> .editor\n// Entering editor mode (^D to finish, ^C to cancel)\nfunction welcome(name) {\n  return `Hello ${name}!`;\n}\n\nwelcome('Node.js User');\n\n// ^D\n'Hello Node.js User!'\n>\n")])])]),e("p",[t._v("The following key combinations in the REPL have these special effects:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("<ctrl>-C")]),t._v(": When pressed once, has the same effect as the "),e("code",[t._v(".break")]),t._v(" command.\nWhen pressed twice on a blank line, has the same effect as the "),e("code",[t._v(".exit")]),t._v("\ncommand.")]),t._v(" "),e("li",[e("code",[t._v("<ctrl>-D")]),t._v(": Has the same effect as the "),e("code",[t._v(".exit")]),t._v(" command.")]),t._v(" "),e("li",[e("code",[t._v("<tab>")]),t._v(": When pressed on a blank line, displays global and local (scope)\nvariables. When pressed while entering other input, displays relevant\nautocompletion options.")])]),t._v(" "),e("h3",{attrs:{id:"default-evaluation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#default-evaluation"}},[t._v("#")]),t._v(" Default Evaluation")]),t._v(" "),e("p",[t._v("By default, all instances of "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" use an evaluation function\nthat evaluates JavaScript expressions and provides access to Node.js' built-in\nmodules. This default behavior can be overridden by passing in an alternative\nevaluation function when the "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" instance is created.")]),t._v(" "),e("h4",{attrs:{id:"javascript-expressions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#javascript-expressions"}},[t._v("#")]),t._v(" JavaScript Expressions")]),t._v(" "),e("p",[t._v("The default evaluator supports direct evaluation of JavaScript expressions:")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> 1 + 1\n2\n> const m = 2\nundefined\n> m + 1\n3\n")])])]),e("p",[t._v("Unless otherwise scoped within blocks or functions, variables declared\neither implicitly or using the "),e("code",[t._v("const")]),t._v(", "),e("code",[t._v("let")]),t._v(", or "),e("code",[t._v("var")]),t._v(" keywords\nare declared at the global scope.")]),t._v(" "),e("h4",{attrs:{id:"global-and-local-scope"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#global-and-local-scope"}},[t._v("#")]),t._v(" Global and Local Scope")]),t._v(" "),e("p",[t._v("The default evaluator provides access to any variables that exist in the global\nscope. It is possible to expose a variable to the REPL explicitly by assigning\nit to the "),e("code",[t._v("context")]),t._v(" object associated with each "),e("code",[t._v("REPLServer")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrepl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Properties in the "),e("code",[t._v("context")]),t._v(" object appear as local within the REPL:")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ node repl_test.js\n> m\n'message'\n")])])]),e("p",[t._v("Context properties are not read-only by default. To specify read-only globals,\ncontext properties must be defined using "),e("code",[t._v("Object.defineProperty()")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nObject"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'m'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  configurable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  enumerable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" msg\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"accessing-core-node-js-modules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accessing-core-node-js-modules"}},[t._v("#")]),t._v(" Accessing Core Node.js Modules")]),t._v(" "),e("p",[t._v("The default evaluator will automatically load Node.js core modules into the\nREPL environment when used. For instance, unless otherwise declared as a\nglobal or scoped variable, the input "),e("code",[t._v("fs")]),t._v(" will be evaluated on-demand as\n"),e("code",[t._v("global.fs = require('fs')")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> fs.createReadStream('./some/file');\n")])])]),e("h4",{attrs:{id:"global-uncaught-exceptions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#global-uncaught-exceptions"}},[t._v("#")]),t._v(" Global Uncaught Exceptions")]),t._v(" "),e("p",[t._v("The REPL uses the "),e("router-link",{attrs:{to:"/node/domain.html"}},[e("code",[t._v("domain")])]),t._v(" module to catch all uncaught exceptions for that\nREPL session.")],1),t._v(" "),e("p",[t._v("This use of the "),e("router-link",{attrs:{to:"/node/domain.html"}},[e("code",[t._v("domain")])]),t._v(" module in the REPL has these side effects:")],1),t._v(" "),e("ul",[e("li",[t._v("Uncaught exceptions only emit the "),e("router-link",{attrs:{to:"/node/process.html#process_event_uncaughtexception"}},[e("code",[t._v("'uncaughtException'")])]),t._v(" event if the\n"),e("code",[t._v("repl")]),t._v(" is used as standalone program. If the "),e("code",[t._v("repl")]),t._v(" is included anywhere in\nanother application, adding a listener for this event will throw an\n"),e("router-link",{attrs:{to:"/node/errors.html#errors_err_invalid_repl_input"}},[e("code",[t._v("ERR_INVALID_REPL_INPUT")])]),t._v(" exception.")],1),t._v(" "),e("li",[t._v("Trying to use "),e("router-link",{attrs:{to:"/node/process.html#process_process_setuncaughtexceptioncapturecallback_fn"}},[e("code",[t._v("process.setUncaughtExceptionCaptureCallback()")])]),t._v(" throws\nan "),e("router-link",{attrs:{to:"/node/errors.html#errors_err_domain_cannot_set_uncaught_exception_capture"}},[e("code",[t._v("ERR_DOMAIN_CANNOT_SET_UNCAUGHT_EXCEPTION_CAPTURE")])]),t._v(" error.")],1)]),t._v(" "),e("p",[t._v("As standalone program:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Uncaught'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foobar'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Uncaught")]),t._v("\n")])])]),e("p",[t._v("When used in another application:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Uncaught'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TypeError [ERR_INVALID_REPL_INPUT]: Listeners for `uncaughtException`")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cannot be used in the REPL")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foobar'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Thrown:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: foobar")]),t._v("\n")])])]),e("h4",{attrs:{id:"assignment-of-the-underscore-variable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#assignment-of-the-underscore-variable"}},[t._v("#")]),t._v(" Assignment of the "),e("code",[t._v("_")]),t._v(" (underscore) variable")]),t._v(" "),e("p",[t._v("The default evaluator will, by default, assign the result of the most recently\nevaluated expression to the special variable "),e("code",[t._v("_")]),t._v(" (underscore).\nExplicitly setting "),e("code",[t._v("_")]),t._v(" to a value will disable this behavior.")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> [ 'a', 'b', 'c' ]\n[ 'a', 'b', 'c' ]\n> _.length\n3\n> _ += 1\nExpression assignment to _ now disabled.\n4\n> 1 + 1\n2\n> _\n4\n")])])]),e("p",[t._v("Similarly, "),e("code",[t._v("_error")]),t._v(" will refer to the last seen error, if there was any.\nExplicitly setting "),e("code",[t._v("_error")]),t._v(" to a value will disable this behavior.")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> throw new Error('foo');\nError: foo\n> _error.message\n'foo'\n")])])]),e("h4",{attrs:{id:"await-keyword"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#await-keyword"}},[t._v("#")]),t._v(" "),e("code",[t._v("await")]),t._v(" keyword")]),t._v(" "),e("p",[t._v("With the "),e("router-link",{attrs:{to:"/node/cli.html#cli_experimental_repl_await"}},[e("code",[t._v("--experimental-repl-await")])]),t._v(" command line option specified,\nexperimental support for the "),e("code",[t._v("await")]),t._v(" keyword is enabled.")],1),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> await Promise.resolve(123)\n123\n> await Promise.reject(new Error('REPL await'))\nError: REPL await\n    at repl:1:45\n> const timeout = util.promisify(setTimeout);\nundefined\n> const old = Date.now(); await timeout(1000); console.log(Date.now() - old);\n1002\nundefined\n")])])]),e("h3",{attrs:{id:"custom-evaluation-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-evaluation-functions"}},[t._v("#")]),t._v(" Custom Evaluation Functions")]),t._v(" "),e("p",[t._v("When a new "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" is created, a custom evaluation function may be\nprovided. This can be used, for instance, to implement fully customized REPL\napplications.")]),t._v(" "),e("p",[t._v("The following illustrates a hypothetical example of a REPL that performs\ntranslation of text from one language to another:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Translator "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'translator'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myTranslator "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Translator")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'en'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fr'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myEval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myTranslator"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("translate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nrepl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myEval "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"recoverable-errors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recoverable-errors"}},[t._v("#")]),t._v(" Recoverable Errors")]),t._v(" "),e("p",[t._v("As a user is typing input into the REPL prompt, pressing the "),e("code",[t._v("<enter>")]),t._v(" key will\nsend the current line of input to the "),e("code",[t._v("eval")]),t._v(" function. In order to support\nmulti-line input, the eval function can return an instance of "),e("code",[t._v("repl.Recoverable")]),t._v("\nto the provided callback function:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myEval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("runInThisContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRecoverableError")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Recoverable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRecoverableError")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SyntaxError'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Unexpected end "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" input"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Unexpected token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"customizing-repl-output"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customizing-repl-output"}},[t._v("#")]),t._v(" Customizing REPL Output")]),t._v(" "),e("p",[t._v("By default, "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" instances format output using the\n"),e("router-link",{attrs:{to:"/node/util.html#util_util_inspect_object_options"}},[e("code",[t._v("util.inspect()")])]),t._v(" method before writing the output to the provided "),e("code",[t._v("Writable")]),t._v("\nstream ("),e("code",[t._v("process.stdout")]),t._v(" by default). The "),e("code",[t._v("showProxy")]),t._v(" inspection option is set\nto true by default and the "),e("code",[t._v("colors")]),t._v(" option is set to true depending on the\nREPL's "),e("code",[t._v("useColors")]),t._v(" option.")],1),t._v(" "),e("p",[t._v("The "),e("code",[t._v("useColors")]),t._v(" boolean option can be specified at construction to instruct the\ndefault writer to use ANSI style codes to colorize the output from the\n"),e("code",[t._v("util.inspect()")]),t._v(" method.")]),t._v(" "),e("p",[t._v("If the REPL is run as standalone program, it is also possible to change the\nREPL's "),e("router-link",{attrs:{to:"/node/util.html#util_util_inspect_object_options"}},[t._v("inspection defaults")]),t._v(" from inside the REPL by using the\n"),e("code",[t._v("inspect.replDefaults")]),t._v(" property which mirrors the "),e("code",[t._v("defaultOptions")]),t._v(" from\n"),e("router-link",{attrs:{to:"/node/util.html#util_util_inspect_object_options"}},[e("code",[t._v("util.inspect()")])]),t._v(".")],1),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> util.inspect.replDefaults.compact = false;\nfalse\n> [1]\n[\n  1\n]\n>\n")])])]),e("p",[t._v("To fully customize the output of a "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" instance pass in a new\nfunction for the "),e("code",[t._v("writer")]),t._v(" option on construction. The following example, for\ninstance, simply converts any input text to upper case:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myEval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" writer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myWriter "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myEval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myWriter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("output")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" output"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"class-replserver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-replserver"}},[t._v("#")]),t._v(" Class: REPLServer")]),t._v(" "),e("ul",[e("li",[t._v("Extends: {readline.Interface}")])]),t._v(" "),e("p",[t._v("Instances of "),e("code",[t._v("repl.REPLServer")]),t._v(" are created using the "),e("code",[t._v("repl.start()")]),t._v(" method and\n"),e("em",[t._v("should not")]),t._v(" be created directly using the JavaScript "),e("code",[t._v("new")]),t._v(" keyword.")]),t._v(" "),e("h3",{attrs:{id:"event-exit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#event-exit"}},[t._v("#")]),t._v(" Event: 'exit'")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("'exit'")]),t._v(" event is emitted when the REPL is exited either by receiving the\n"),e("code",[t._v(".exit")]),t._v(" command as input, the user pressing "),e("code",[t._v("<ctrl>-C")]),t._v(" twice to signal "),e("code",[t._v("SIGINT")]),t._v(",\nor by pressing "),e("code",[t._v("<ctrl>-D")]),t._v(" to signal "),e("code",[t._v("'end'")]),t._v(" on the input stream. The listener\ncallback is invoked without any arguments.")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("replServer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Received \"exit\" event from repl!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"event-reset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#event-reset"}},[t._v("#")]),t._v(" Event: 'reset'")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("'reset'")]),t._v(" event is emitted when the REPL's context is reset. This occurs\nwhenever the "),e("code",[t._v(".clear")]),t._v(" command is received as input "),e("em",[t._v("unless")]),t._v(" the REPL is using\nthe default evaluator and the "),e("code",[t._v("repl.REPLServer")]),t._v(" instance was created with the\n"),e("code",[t._v("useGlobal")]),t._v(" option set to "),e("code",[t._v("true")]),t._v(". The listener callback will be called with a\nreference to the "),e("code",[t._v("context")]),t._v(" object as the only argument.")]),t._v(" "),e("p",[t._v("This can be used primarily to re-initialize REPL context to some pre-defined\nstate:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reset'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initializeContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("When this code is executed, the global "),e("code",[t._v("'m'")]),t._v(" variable can be modified but then\nreset to its initial value using the "),e("code",[t._v(".clear")]),t._v(" command:")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ ./node example.js\n> m\n'test'\n> m = 1\n1\n> m\n1\n> .clear\nClearing context...\n> m\n'test'\n>\n")])])]),e("h3",{attrs:{id:"replserver-definecommand-keyword-cmd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replserver-definecommand-keyword-cmd"}},[t._v("#")]),t._v(" replServer.defineCommand(keyword, cmd)")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("keyword")]),t._v(" {string} The command keyword ("),e("em",[t._v("without")]),t._v(" a leading "),e("code",[t._v(".")]),t._v(" character).")]),t._v(" "),e("li",[e("code",[t._v("cmd")]),t._v(" {Object|Function} The function to invoke when the command is processed.")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("replServer.defineCommand()")]),t._v(" method is used to add new "),e("code",[t._v(".")]),t._v("-prefixed commands\nto the REPL instance. Such commands are invoked by typing a "),e("code",[t._v(".")]),t._v(" followed by the\n"),e("code",[t._v("keyword")]),t._v(". The "),e("code",[t._v("cmd")]),t._v(" is either a "),e("code",[t._v("Function")]),t._v(" or an "),e("code",[t._v("Object")]),t._v(" with the following\nproperties:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("help")]),t._v(" {string} Help text to be displayed when "),e("code",[t._v(".help")]),t._v(" is entered (Optional).")]),t._v(" "),e("li",[e("code",[t._v("action")]),t._v(" {Function} The function to execute, optionally accepting a single\nstring argument.")])]),t._v(" "),e("p",[t._v("The following example shows two new commands added to the REPL instance:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" replServer "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> '")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreplServer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineCommand")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sayhello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  help"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Say hello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearBufferedCommand")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("Hello, ")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("displayPrompt")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreplServer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineCommand")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'saybye'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("saybye")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Goodbye!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("The new commands can then be used from within the REPL instance:")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> .sayhello Node.js User\nHello, Node.js User!\n> .saybye\nGoodbye!\n")])])]),e("h3",{attrs:{id:"replserver-displayprompt-preservecursor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replserver-displayprompt-preservecursor"}},[t._v("#")]),t._v(" replServer.displayPrompt([preserveCursor])")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("preserveCursor")]),t._v(" {boolean}")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("replServer.displayPrompt()")]),t._v(" method readies the REPL instance for input\nfrom the user, printing the configured "),e("code",[t._v("prompt")]),t._v(" to a new line in the "),e("code",[t._v("output")]),t._v("\nand resuming the "),e("code",[t._v("input")]),t._v(" to accept new input.")]),t._v(" "),e("p",[t._v("When multi-line input is being entered, an ellipsis is printed rather than the\n'prompt'.")]),t._v(" "),e("p",[t._v("When "),e("code",[t._v("preserveCursor")]),t._v(" is "),e("code",[t._v("true")]),t._v(", the cursor placement will not be reset to "),e("code",[t._v("0")]),t._v(".")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("replServer.displayPrompt")]),t._v(" method is primarily intended to be called from\nwithin the action function for commands registered using the\n"),e("code",[t._v("replServer.defineCommand()")]),t._v(" method.")]),t._v(" "),e("h3",{attrs:{id:"replserver-clearbufferedcommand"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replserver-clearbufferedcommand"}},[t._v("#")]),t._v(" replServer.clearBufferedCommand()")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("replServer.clearBufferedCommand()")]),t._v(" method clears any command that has been\nbuffered but not yet executed. This method is primarily intended to be\ncalled from within the action function for commands registered using the\n"),e("code",[t._v("replServer.defineCommand()")]),t._v(" method.")]),t._v(" "),e("h3",{attrs:{id:"replserver-parsereplkeyword-keyword-rest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replserver-parsereplkeyword-keyword-rest"}},[t._v("#")]),t._v(" replServer.parseREPLKeyword(keyword[, rest])")]),t._v(" "),e("blockquote",[e("p",[t._v("Stability: 0 - Deprecated.")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("keyword")]),t._v(" {string} the potential keyword to parse and execute")]),t._v(" "),e("li",[e("code",[t._v("rest")]),t._v(" {any} any parameters to the keyword command")]),t._v(" "),e("li",[t._v("Returns: {boolean}")])]),t._v(" "),e("p",[t._v("An internal method used to parse and execute "),e("code",[t._v("REPLServer")]),t._v(" keywords.\nReturns "),e("code",[t._v("true")]),t._v(" if "),e("code",[t._v("keyword")]),t._v(" is a valid keyword, otherwise "),e("code",[t._v("false")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"replserver-setuphistory-historypath-callback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replserver-setuphistory-historypath-callback"}},[t._v("#")]),t._v(" replServer.setupHistory(historyPath, callback)")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("historyPath")]),t._v(" {string} the path to the history file")]),t._v(" "),e("li",[e("code",[t._v("callback")]),t._v(" {Function} called when history writes are ready or upon error\n"),e("ul",[e("li",[e("code",[t._v("err")]),t._v(" {Error}")]),t._v(" "),e("li",[e("code",[t._v("repl")]),t._v(" {repl.REPLServer}")])])])]),t._v(" "),e("p",[t._v("Initializes a history log file for the REPL instance. When executing the\nNode.js binary and using the command line REPL, a history file is initialized\nby default. However, this is not the case when creating a REPL\nprogrammatically. Use this method to initialize a history log file when working\nwith REPL instances programmatically.")]),t._v(" "),e("h2",{attrs:{id:"repl-start-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#repl-start-options"}},[t._v("#")]),t._v(" repl.start([options])")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("options")]),t._v(" {Object|string}\n"),e("ul",[e("li",[e("code",[t._v("prompt")]),t._v(" {string} The input prompt to display. "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("'> '")]),t._v("\n(with a trailing space).")]),t._v(" "),e("li",[e("code",[t._v("input")]),t._v(" {stream.Readable} The "),e("code",[t._v("Readable")]),t._v(" stream from which REPL input will\nbe read. "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("process.stdin")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("output")]),t._v(" {stream.Writable} The "),e("code",[t._v("Writable")]),t._v(" stream to which REPL output will\nbe written. "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("process.stdout")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("terminal")]),t._v(" {boolean} If "),e("code",[t._v("true")]),t._v(", specifies that the "),e("code",[t._v("output")]),t._v(" should be\ntreated as a TTY terminal.\n"),e("strong",[t._v("Default:")]),t._v(" checking the value of the "),e("code",[t._v("isTTY")]),t._v(" property on the "),e("code",[t._v("output")]),t._v("\nstream upon instantiation.")]),t._v(" "),e("li",[e("code",[t._v("eval")]),t._v(" {Function} The function to be used when evaluating each given line\nof input. "),e("strong",[t._v("Default:")]),t._v(" an async wrapper for the JavaScript "),e("code",[t._v("eval()")]),t._v("\nfunction. An "),e("code",[t._v("eval")]),t._v(" function can error with "),e("code",[t._v("repl.Recoverable")]),t._v(" to indicate\nthe input was incomplete and prompt for additional lines.")]),t._v(" "),e("li",[e("code",[t._v("useColors")]),t._v(" {boolean} If "),e("code",[t._v("true")]),t._v(", specifies that the default "),e("code",[t._v("writer")]),t._v("\nfunction should include ANSI color styling to REPL output. If a custom\n"),e("code",[t._v("writer")]),t._v(" function is provided then this has no effect. "),e("strong",[t._v("Default:")]),t._v(" checking\ncolor support on the "),e("code",[t._v("output")]),t._v(" stream if the REPL instance's "),e("code",[t._v("terminal")]),t._v(" value\nis "),e("code",[t._v("true")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("useGlobal")]),t._v(" {boolean} If "),e("code",[t._v("true")]),t._v(", specifies that the default evaluation\nfunction will use the JavaScript "),e("code",[t._v("global")]),t._v(" as the context as opposed to\ncreating a new separate context for the REPL instance. The node CLI REPL\nsets this value to "),e("code",[t._v("true")]),t._v(". "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("false")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("ignoreUndefined")]),t._v(" {boolean} If "),e("code",[t._v("true")]),t._v(", specifies that the default writer\nwill not output the return value of a command if it evaluates to\n"),e("code",[t._v("undefined")]),t._v(". "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("false")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("writer")]),t._v(" {Function} The function to invoke to format the output of each\ncommand before writing to "),e("code",[t._v("output")]),t._v(". "),e("strong",[t._v("Default:")]),t._v(" "),e("router-link",{attrs:{to:"/node/util.html#util_util_inspect_object_options"}},[e("code",[t._v("util.inspect()")])]),t._v(".")],1),t._v(" "),e("li",[e("code",[t._v("completer")]),t._v(" {Function} An optional function used for custom Tab auto\ncompletion. See "),e("router-link",{attrs:{to:"/node/readline.html#readline_use_of_the_completer_function"}},[e("code",[t._v("readline.InterfaceCompleter")])]),t._v(" for an example.")],1),t._v(" "),e("li",[e("code",[t._v("replMode")]),t._v(" {symbol} A flag that specifies whether the default evaluator\nexecutes all JavaScript commands in strict mode or default (sloppy) mode.\nAcceptable values are:\n"),e("ul",[e("li",[e("code",[t._v("repl.REPL_MODE_SLOPPY")]),t._v(" to evaluate expressions in sloppy mode.")]),t._v(" "),e("li",[e("code",[t._v("repl.REPL_MODE_STRICT")]),t._v(" to evaluate expressions in strict mode. This is\nequivalent to prefacing every repl statement with "),e("code",[t._v("'use strict'")]),t._v(".")])])]),t._v(" "),e("li",[e("code",[t._v("breakEvalOnSigint")]),t._v(" {boolean} Stop evaluating the current piece of code when\n"),e("code",[t._v("SIGINT")]),t._v(" is received, such as when "),e("code",[t._v("Ctrl+C")]),t._v(" is pressed. This cannot be used\ntogether with a custom "),e("code",[t._v("eval")]),t._v(" function. "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("false")]),t._v(".")])])]),t._v(" "),e("li",[t._v("Returns: {repl.REPLServer}")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("repl.start()")]),t._v(" method creates and starts a "),e("a",{attrs:{href:"#repl_class_replserver"}},[e("code",[t._v("repl.REPLServer")])]),t._v(" instance.")]),t._v(" "),e("p",[t._v("If "),e("code",[t._v("options")]),t._v(" is a string, then it specifies the input prompt:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a Unix style prompt")]),t._v("\nrepl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$ '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"the-node-js-repl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-node-js-repl"}},[t._v("#")]),t._v(" The Node.js REPL")]),t._v(" "),e("p",[t._v("Node.js itself uses the "),e("code",[t._v("repl")]),t._v(" module to provide its own interactive interface\nfor executing JavaScript. This can be used by executing the Node.js binary\nwithout passing any arguments (or by passing the "),e("code",[t._v("-i")]),t._v(" argument):")]),t._v(" "),e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ node\n> const a = [1, 2, 3];\nundefined\n> a\n[ 1, 2, 3 ]\n> a.forEach((v) => {\n...   console.log(v);\n...   });\n1\n2\n3\n")])])]),e("h3",{attrs:{id:"environment-variable-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environment-variable-options"}},[t._v("#")]),t._v(" Environment Variable Options")]),t._v(" "),e("p",[t._v("Various behaviors of the Node.js REPL can be customized using the following\nenvironment variables:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("NODE_REPL_HISTORY")]),t._v(": When a valid path is given, persistent REPL history\nwill be saved to the specified file rather than "),e("code",[t._v(".node_repl_history")]),t._v(" in the\nuser's home directory. Setting this value to "),e("code",[t._v("''")]),t._v(" (an empty string) will\ndisable persistent REPL history. Whitespace will be trimmed from the value.\nOn Windows platforms environment variables with empty values are invalid so\nset this variable to one or more spaces to disable persistent REPL history.")]),t._v(" "),e("li",[e("code",[t._v("NODE_REPL_HISTORY_SIZE")]),t._v(": Controls how many lines of history will be\npersisted if history is available. Must be a positive number.\n"),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("1000")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("NODE_REPL_MODE")]),t._v(": May be either "),e("code",[t._v("'sloppy'")]),t._v(" or "),e("code",[t._v("'strict'")]),t._v(". "),e("strong",[t._v("Default:")]),t._v(" "),e("code",[t._v("'sloppy'")]),t._v(", which will allow non-strict mode code to be run.")])]),t._v(" "),e("h3",{attrs:{id:"persistent-history"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#persistent-history"}},[t._v("#")]),t._v(" Persistent History")]),t._v(" "),e("p",[t._v("By default, the Node.js REPL will persist history between "),e("code",[t._v("node")]),t._v(" REPL sessions\nby saving inputs to a "),e("code",[t._v(".node_repl_history")]),t._v(" file located in the user's home\ndirectory. This can be disabled by setting the environment variable\n"),e("code",[t._v("NODE_REPL_HISTORY=''")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"using-the-node-js-repl-with-advanced-line-editors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-node-js-repl-with-advanced-line-editors"}},[t._v("#")]),t._v(" Using the Node.js REPL with advanced line-editors")]),t._v(" "),e("p",[t._v("For advanced line-editors, start Node.js with the environment variable\n"),e("code",[t._v("NODE_NO_READLINE=1")]),t._v(". This will start the main and debugger REPL in canonical\nterminal settings, which will allow use with "),e("code",[t._v("rlwrap")]),t._v(".")]),t._v(" "),e("p",[t._v("For example, the following can be added to a "),e("code",[t._v(".bashrc")]),t._v(" file:")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('alias node="env NODE_NO_READLINE=1 rlwrap node"\n')])])]),e("h3",{attrs:{id:"starting-multiple-repl-instances-against-a-single-running-instance"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#starting-multiple-repl-instances-against-a-single-running-instance"}},[t._v("#")]),t._v(" Starting multiple REPL instances against a single running instance")]),t._v(" "),e("p",[t._v("It is possible to create and run multiple REPL instances against a single\nrunning instance of Node.js that share a single "),e("code",[t._v("global")]),t._v(" object but have\nseparate I/O interfaces.")]),t._v(" "),e("p",[t._v("The following example, for instance, provides separate REPLs on "),e("code",[t._v("stdin")]),t._v(", a Unix\nsocket, and a TCP socket:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" connections "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrepl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Node.js via stdin> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nnet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  connections "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Node.js via Unix socket> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" socket"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" socket\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/node-repl-sock'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nnet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  connections "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  repl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    prompt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Node.js via TCP socket> '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" socket"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" socket\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5001")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Running this application from the command line will start a REPL on stdin.\nOther REPL clients may connect through the Unix socket or TCP socket. "),e("code",[t._v("telnet")]),t._v(",\nfor instance, is useful for connecting to TCP sockets, while "),e("code",[t._v("socat")]),t._v(" can be used\nto connect to both Unix and TCP sockets.")]),t._v(" "),e("p",[t._v("By starting a REPL from a Unix socket-based server instead of stdin, it is\npossible to connect to a long-running Node.js process without restarting it.")]),t._v(" "),e("p",[t._v('For an example of running a "full-featured" ('),e("code",[t._v("terminal")]),t._v(") REPL over\na "),e("code",[t._v("net.Server")]),t._v(" and "),e("code",[t._v("net.Socket")]),t._v(" instance, see:\n"),e("a",{attrs:{href:"https://gist.github.com/TooTallNate/2209310",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/TooTallNate/2209310"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("For an example of running a REPL instance over "),e("a",{attrs:{href:"https://curl.haxx.se/docs/manpage.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("curl(1)"),e("OutboundLink")],1),t._v(", see:\n"),e("a",{attrs:{href:"https://gist.github.com/TooTallNate/2053342",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/TooTallNate/2053342"),e("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);s.default=n.exports}}]);