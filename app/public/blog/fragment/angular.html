<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>angular7.0使用指南 | QLQ学习平台</title>
    <meta name="description" content="QLQ学习平台">
    <link rel="manifest" href="/public/blog/manifest.json">
    
    <link rel="preload" href="/public/blog/assets/css/0.styles.3ad33863.css" as="style"><link rel="preload" href="/public/blog/assets/js/app.e4ea57ce.js" as="script"><link rel="preload" href="/public/blog/assets/js/2.d1dd4e4d.js" as="script"><link rel="preload" href="/public/blog/assets/js/8.5443f788.js" as="script"><link rel="preload" href="/public/blog/assets/js/3.1f730cd9.js" as="script"><link rel="prefetch" href="/public/blog/assets/js/10.7d4b1d4b.js"><link rel="prefetch" href="/public/blog/assets/js/11.b74ab56f.js"><link rel="prefetch" href="/public/blog/assets/js/12.5effa0dc.js"><link rel="prefetch" href="/public/blog/assets/js/13.6eb918e8.js"><link rel="prefetch" href="/public/blog/assets/js/14.0de95251.js"><link rel="prefetch" href="/public/blog/assets/js/15.fa3eaaf6.js"><link rel="prefetch" href="/public/blog/assets/js/16.fa5a1f3f.js"><link rel="prefetch" href="/public/blog/assets/js/17.65e33a7a.js"><link rel="prefetch" href="/public/blog/assets/js/18.a604e43f.js"><link rel="prefetch" href="/public/blog/assets/js/19.43fdc1b1.js"><link rel="prefetch" href="/public/blog/assets/js/20.c6e0b4b7.js"><link rel="prefetch" href="/public/blog/assets/js/21.81d73e54.js"><link rel="prefetch" href="/public/blog/assets/js/22.2da1489e.js"><link rel="prefetch" href="/public/blog/assets/js/23.98032a48.js"><link rel="prefetch" href="/public/blog/assets/js/24.bf1aeeb3.js"><link rel="prefetch" href="/public/blog/assets/js/25.ff0a5a9e.js"><link rel="prefetch" href="/public/blog/assets/js/26.9a69e70f.js"><link rel="prefetch" href="/public/blog/assets/js/27.78d71253.js"><link rel="prefetch" href="/public/blog/assets/js/28.05172e35.js"><link rel="prefetch" href="/public/blog/assets/js/29.836b5f2c.js"><link rel="prefetch" href="/public/blog/assets/js/30.7f2a0aa5.js"><link rel="prefetch" href="/public/blog/assets/js/31.16e7c775.js"><link rel="prefetch" href="/public/blog/assets/js/32.9d8aa648.js"><link rel="prefetch" href="/public/blog/assets/js/33.3ad73093.js"><link rel="prefetch" href="/public/blog/assets/js/34.a27e23cf.js"><link rel="prefetch" href="/public/blog/assets/js/35.34f0ba53.js"><link rel="prefetch" href="/public/blog/assets/js/36.993eb43f.js"><link rel="prefetch" href="/public/blog/assets/js/37.70ac44f6.js"><link rel="prefetch" href="/public/blog/assets/js/38.4b9e0ad1.js"><link rel="prefetch" href="/public/blog/assets/js/39.f8c33c98.js"><link rel="prefetch" href="/public/blog/assets/js/4.a6ed393e.js"><link rel="prefetch" href="/public/blog/assets/js/40.a2197e85.js"><link rel="prefetch" href="/public/blog/assets/js/41.467d6440.js"><link rel="prefetch" href="/public/blog/assets/js/42.ba8fc1fa.js"><link rel="prefetch" href="/public/blog/assets/js/43.b9d80aa8.js"><link rel="prefetch" href="/public/blog/assets/js/44.9b55cec1.js"><link rel="prefetch" href="/public/blog/assets/js/45.fbd44db5.js"><link rel="prefetch" href="/public/blog/assets/js/46.cff257a8.js"><link rel="prefetch" href="/public/blog/assets/js/47.3cd816de.js"><link rel="prefetch" href="/public/blog/assets/js/48.fdd057cb.js"><link rel="prefetch" href="/public/blog/assets/js/49.e007afae.js"><link rel="prefetch" href="/public/blog/assets/js/5.868620b4.js"><link rel="prefetch" href="/public/blog/assets/js/50.05e06075.js"><link rel="prefetch" href="/public/blog/assets/js/51.28689d1c.js"><link rel="prefetch" href="/public/blog/assets/js/52.84b0ef5c.js"><link rel="prefetch" href="/public/blog/assets/js/53.586cad0a.js"><link rel="prefetch" href="/public/blog/assets/js/54.2b8a703d.js"><link rel="prefetch" href="/public/blog/assets/js/55.c466c411.js"><link rel="prefetch" href="/public/blog/assets/js/56.882ab9d2.js"><link rel="prefetch" href="/public/blog/assets/js/57.edaca7e3.js"><link rel="prefetch" href="/public/blog/assets/js/58.c7ce4964.js"><link rel="prefetch" href="/public/blog/assets/js/59.02f33b29.js"><link rel="prefetch" href="/public/blog/assets/js/6.8e0ec0a1.js"><link rel="prefetch" href="/public/blog/assets/js/60.3e43121d.js"><link rel="prefetch" href="/public/blog/assets/js/61.e73a45bf.js"><link rel="prefetch" href="/public/blog/assets/js/62.a1ea2161.js"><link rel="prefetch" href="/public/blog/assets/js/63.0a4a98df.js"><link rel="prefetch" href="/public/blog/assets/js/64.0422c733.js"><link rel="prefetch" href="/public/blog/assets/js/65.b26f077a.js"><link rel="prefetch" href="/public/blog/assets/js/7.287519a5.js"><link rel="prefetch" href="/public/blog/assets/js/9.ef0461e8.js">
    <link rel="stylesheet" href="/public/blog/assets/css/0.styles.3ad33863.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/public/blog/" class="home-link router-link-active"><!----> <span class="site-name">QLQ学习平台</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/public/blog/js/regexp.html" class="nav-link">javaScript</a></div><div class="nav-item"><a href="/public/blog/css/bfc.html" class="nav-link">css</a></div><div class="nav-item"><a href="/public/blog/webpack/base-config.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/public/blog/node/buffer.html" class="nav-link">node</a></div><div class="nav-item"><a href="/public/blog/fragment/angular.html" class="nav-link router-link-exact-active router-link-active">js框架</a></div><div class="nav-item"><a href="/public/blog/pwa/PWA.html" class="nav-link">pwa</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/public/blog/js/regexp.html" class="nav-link">javaScript</a></div><div class="nav-item"><a href="/public/blog/css/bfc.html" class="nav-link">css</a></div><div class="nav-item"><a href="/public/blog/webpack/base-config.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/public/blog/node/buffer.html" class="nav-link">node</a></div><div class="nav-item"><a href="/public/blog/fragment/angular.html" class="nav-link router-link-exact-active router-link-active">js框架</a></div><div class="nav-item"><a href="/public/blog/pwa/PWA.html" class="nav-link">pwa</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/public/blog/fragment/angular.html" class="active sidebar-link">angular7.0使用指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#环境搭建" class="sidebar-link">环境搭建</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#组件与模板" class="sidebar-link">组件与模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#理解模板表达式上下文" class="sidebar-link">理解模板表达式上下文</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#理解html-attribute-与-dom-property" class="sidebar-link">理解HTML attribute 与 DOM property</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#指令" class="sidebar-link">指令</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#管道" class="sidebar-link">管道</a></li></ul></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#依赖注入" class="sidebar-link">依赖注入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#angular实现控制反转的手段就是依赖注入" class="sidebar-link">angular实现控制反转的手段就是依赖注入</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#依赖注入的好处：" class="sidebar-link">依赖注入的好处：</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#首先创建一个服务" class="sidebar-link">首先创建一个服务</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#服务提供商（注入器）" class="sidebar-link">服务提供商（注入器）</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#注入器冒泡" class="sidebar-link">注入器冒泡</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#注入服务：" class="sidebar-link">注入服务：</a></li></ul></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#angular-router路由" class="sidebar-link">@angular/router路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#routes路由配置介绍" class="sidebar-link">Routes路由配置介绍</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#路由跳转" class="sidebar-link">路由跳转</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#路由数据传递：" class="sidebar-link">路由数据传递：</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#activatedroute-常用：this-routeinfo见上面" class="sidebar-link">ActivatedRoute 常用：this.routeInfo见上面</a></li></ul></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#守卫路由" class="sidebar-link">守卫路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#_1-canactivate" class="sidebar-link">1.canActivate</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#_2-candeactivate" class="sidebar-link">2.canDeactivate</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#_3-resolve-读取数据前" class="sidebar-link">3.resolve 读取数据前</a></li></ul></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#生命周期钩子" class="sidebar-link">生命周期钩子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#钩子函数的执行顺序" class="sidebar-link">钩子函数的执行顺序</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#初始化阶段" class="sidebar-link">初始化阶段</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#变化阶段" class="sidebar-link">变化阶段</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#组件销毁阶段" class="sidebar-link">组件销毁阶段</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#ngafterviewinit-ngafterviewchecked" class="sidebar-link">ngAfterViewInit,ngAfterViewChecked</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#ngaftercontentinit-ngaftercontentchecked，投影" class="sidebar-link">ngAfterContentInit,ngAfterContentChecked，投影</a></li></ul></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#表单" class="sidebar-link">表单</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#模板式表单" class="sidebar-link">模板式表单</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#响应式表单" class="sidebar-link">响应式表单</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#angular表单-校验器" class="sidebar-link">angular表单 校验器</a></li><li class="sidebar-sub-header"><a href="/public/blog/fragment/angular.html#由于文章过于冗长，关于表单，httpclient等内容我将重新开启一篇文章，感谢广大读者的支持。" class="sidebar-link">由于文章过于冗长，关于表单，httpclient等内容我将重新开启一篇文章，感谢广大读者的支持。</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="angular7-0使用指南"><a href="#angular7-0使用指南" class="header-anchor">#</a> angular7.0使用指南</h1> <p>本文章宗旨在于快速开始angular开发，或者快速了解angular开发注意事项的文章</p> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <ol><li>脚手架安装：npm i -g @angular/cli</li> <li>新建项目：ng new my-app</li></ol> <p><font color="red">如果安装脚手架报错，强制清理npm缓存后重新安装</font></p> <h2 id="组件与模板"><a href="#组件与模板" class="header-anchor">#</a> 组件与模板</h2> <p>当你下载好官方案列后，你可能对目录都不太熟悉，先不要将关注点放在这里，文章致力于如何快速上手一个angular项目。</p> <h3 id="理解模板表达式上下文"><a href="#理解模板表达式上下文" class="header-anchor">#</a> 理解模板表达式上下文</h3> <p><font color="red">表达式中的上下文变量是由以下三种组成：</font></p> <ol><li>模板变量 （<font color="red">模板的 $event 对象</font>、<font color="red">模板输入变量 (let hero)</font>和<font color="red">模板引用变量(#heroForm)</font> ）</li> <li>指令的上下文变量（<font color="red">指令中的属性</font>）</li> <li>组件的成员变量（<font color="red">组件实列</font>）</li></ol> <p><strong>当存在相同的表达式变量优先顺序：模板变量&gt;&gt;指令的上下文变量&gt;&gt;组件的成员变量</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

<span class="token comment">//my-app/src/app/app.component.ts</span>
@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token punctuation">:</span> <span class="token string">'app-root'</span><span class="token punctuation">,</span>
  templateUrl<span class="token punctuation">:</span> <span class="token string">'./app.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./app.component.css'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> data0<span class="token punctuation">:</span>Number <span class="token operator">=</span> <span class="token number">1121</span><span class="token punctuation">;</span> 
  data1 <span class="token operator">=</span> <span class="token string">'&lt;div&gt;dddddd&lt;/div&gt;'</span><span class="token punctuation">;</span>
  data2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    aaa<span class="token punctuation">:</span><span class="token number">222</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">data3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  data4 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  data5 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  data6 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data0 ：{{data0}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data1 ：{{data1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data2 ：{{data2}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data3 ：{{data3}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data4 ：{{data4}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data5 ：{{data5}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data6 ：{{data6}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>data7 ：{{data7}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 
	data0 ：1121
	data1 ：&lt;div&gt;dddddd&lt;/div&gt;
	data2 ：[object Object]
	data3 ：function () { }
	data4 ：
	data5 ：
	data6 ：1,2,3
	data7 ： 
--&gt;</span>
</code></pre></div><h3 id="理解html-attribute-与-dom-property"><a href="#理解html-attribute-与-dom-property" class="header-anchor">#</a> 理解HTML attribute 与 DOM property</h3> <p>先来看一个列子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//html：&lt;input type=&quot;text&quot; value=&quot;a&quot;&gt;</span>
<span class="token keyword">var</span> <span class="token function-variable function">outPutVal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getAttribute：'</span><span class="token punctuation">,</span>inO<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inO.value:'</span><span class="token punctuation">,</span>inO<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> inO <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelect</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">outPutVal</span><span class="token punctuation">(</span>inO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//getAttribute： a</span>
    <span class="token comment">//inO.value: a</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//&lt;input type=&quot;text&quot; value=&quot;a&quot;&gt; 手动输入value为aaaaa后打印</span>
        <span class="token function">outPutVal</span><span class="token punctuation">(</span>inO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//getAttribute： a</span>
        <span class="token comment">//inO.value: aaaaa</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上原生js展示了HTML attribute 与 DOM property 的区别:</p> <ol><li>少量 HTML attribute 和 property 之间有着 1:1 的映射，如 id。</li> <li>有些 HTML attribute 没有对应的 property，如 colspan。</li> <li>有些 DOM property 没有对应的 attribute，如 textContent。</li></ol> <p><font color="red">angular中模板绑定是通过 property 和事件来工作的，而不是 attribute</font></p> <p><strong>特殊的attribute 绑定</strong></p> <div class="language-html extra-class"><pre class="language-html"><code>[attr.aria-label]=&quot;actionName&quot;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">[attr.colspan]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1 + 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="指令"><a href="#指令" class="header-anchor">#</a> 指令</h3> <p>指令分为三种：</p> <ol><li>组件 — 拥有模板的指令</li> <li>结构型指令 — 通过添加和移除 DOM 元素改变 DOM 布局的指令</li> <li>属性型指令 — 改变元素、组件或其它指令的外观和行为的指令。</li></ol> <h4 id="属性指令"><a href="#属性指令" class="header-anchor">#</a> 属性指令</h4> <ol><li>ngClass</li> <li>ngStyle</li> <li>ngModel</li></ol> <h4 id="结构型指令"><a href="#结构型指令" class="header-anchor">#</a> 结构型指令</h4> <ol><li>ngIf</li> <li>ngFor</li> <li>ngSwitch</li></ol> <h5 id="ng-template-号语法"><a href="#ng-template-号语法" class="header-anchor">#</a> ng-template *号语法</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{hero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
-----------------------------------
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">[ngIf]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{hero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>let hero of heroes; let i=index; let odd=odd; trackBy: trackById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[class.odd]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ({{i}}) {{hero.name}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
-----------------------------------
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">ngFor</span> <span class="token attr-name">let-hero</span> <span class="token attr-name">[ngForOf]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>heroes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">let-i</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">let-odd</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[ngForTrackBy]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackById<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[class.odd]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>({{i}}) {{hero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><font color="red">在渲染视图之前，Angular 会把 &lt; ng-template &gt; 及其包裹内容替换为一个注释</font></p> <h5 id="ng-container"><a href="#ng-container" class="header-anchor">#</a> ng-container</h5> <p>会将兄弟元素归为一组并且<font color="red">ng-template 会无副作用的包裹内部元素</font></p> <p>无副作用是什么意思？（举个例子：破坏了html结构！）：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  I turned the corner
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    and saw {{hero.name}}. I waved
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  and continued on my way.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

---------------------------

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  I turned the corner
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    and saw {{hero.name}}. I waved
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">&gt;</span></span>
  and continued on my way.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="组件-特殊的指令（拥有模板的指令）"><a href="#组件-特殊的指令（拥有模板的指令）" class="header-anchor">#</a> 组件--特殊的指令（拥有模板的指令）</h4> <div class="language- extra-class"><pre class="language-text"><code>ng g c components/A 创建组件
</code></pre></div><h4 id="组件通信的几种方式"><a href="#组件通信的几种方式" class="header-anchor">#</a> 组件通信的几种方式</h4> <h5 id="_1-输入属性-input-（父组件传递数据给子组件）"><a href="#_1-输入属性-input-（父组件传递数据给子组件）" class="header-anchor">#</a> 1.输入属性 @Input()（父组件传递数据给子组件）</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//a.component.ts</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  inAttr<span class="token punctuation">:</span>String<span class="token punctuation">;</span>


  <span class="token keyword">private</span> _name<span class="token punctuation">:</span>String <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span> <span class="token function">inAttr2</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span>String</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">get</span> <span class="token function">inAttr2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>String<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h5 id="_2-输出属性-output-（子组件传递数据给父组件）"><a href="#_2-输出属性-output-（子组件传递数据给父组件）" class="header-anchor">#</a> 2.输出属性 @Output()（子组件传递数据给父组件）</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//子组件中</span>
@<span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myEvent<span class="token punctuation">:</span>EventEmitter<span class="token operator">&lt;</span>DataType<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>myEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//父组件中</span>
<span class="token punctuation">(</span>myEvent<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;myHandleEvent($event)&quot;</span>
<span class="token function">myHandleEvent</span><span class="token punctuation">(</span><span class="token parameter">Data<span class="token punctuation">:</span>DataType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_3-中间人模式（兄弟组件通过公共的父组件传值）"><a href="#_3-中间人模式（兄弟组件通过公共的父组件传值）" class="header-anchor">#</a> 3.中间人模式（兄弟组件通过公共的父组件传值）</h5> <h5 id="_4-父组件获得子组件引用-child（只可以在组件模板中使用）"><a href="#_4-父组件获得子组件引用-child（只可以在组件模板中使用）" class="header-anchor">#</a> 4.父组件获得子组件引用 #child（只可以在组件模板中使用）</h5> <h5 id="_5-viewchild-父组件类插入子组件-（在组件类中使用）"><a href="#_5-viewchild-父组件类插入子组件-（在组件类中使用）" class="header-anchor">#</a> 5. @ViewChild()父组件类插入子组件 （在组件类中使用）</h5> <ol><li>被注入的子组件只有在 Angular 显示了父组件视图之后才能访问（ngAfterViewInit生命周期中访问）</li> <li>Angular 的单向数据流规则会阻止在同一个周期内更新父组件视图。应用在显示秒数之前会被迫再等一轮。</li> <li>解决方法：使用 setTimeout() 来更改数据</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>@<span class="token function">ViewChild</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">)</span>
<span class="token keyword">private</span> childComponent<span class="token punctuation">:</span> ChildComponent<span class="token punctuation">;</span>

<span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">seconds</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>childComponent<span class="token punctuation">.</span>changeData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_6-通过服务更改数据（任意组件结构中使用）"><a href="#_6-通过服务更改数据（任意组件结构中使用）" class="header-anchor">#</a> 6.通过服务更改数据（任意组件结构中使用）</h5> <h4 id="自定义指令"><a href="#自定义指令" class="header-anchor">#</a> 自定义指令</h4> <div class="language- extra-class"><pre class="language-text"><code>ng g d myDirective/demo
</code></pre></div><ol><li>属性型指令</li></ol> <p>ElementRef：对视图中某个原生元素的包装器。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> HostListener<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token punctuation">:</span> <span class="token string">'[appDemo]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DemoDirective</span> <span class="token punctuation">{</span>
  <span class="token comment">//构造函数要声明需要注入的元素 el: ElementRef。</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> el<span class="token punctuation">:</span>ElementRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token comment">// 注册事件</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//指令参数，当参数名与指令名相同时，可以直接赋值给指令</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ss<span class="token punctuation">:</span>String <span class="token operator">=</span> <span class="token string">'aaa'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">appDemo</span> <span class="token attr-name">[ss]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bbb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>结构型指令</li></ol> <p>TemplateRef：取得 &lt; ng-template &gt; 的内容</p> <p>ViewContainerRef: 访问视图容器</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> TemplateRef<span class="token punctuation">,</span> ViewContainerRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> selector<span class="token punctuation">:</span> <span class="token string">'[appUnless]'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UnlessDirective</span> <span class="token punctuation">{</span>
  <span class="token comment">//第一次传入true时不执行任何if分支,提升性能</span>
  <span class="token keyword">private</span> hasView <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token keyword">private</span> templateRef<span class="token punctuation">:</span> TemplateRef<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span> viewContainer<span class="token punctuation">:</span> ViewContainerRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">set</span> <span class="token function">appUnless</span><span class="token punctuation">(</span><span class="token parameter">condition<span class="token punctuation">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>condition <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//实列化一个试图，并把它插入到该容器中</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>viewContainer<span class="token punctuation">.</span><span class="token function">createEmbeddedView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>templateRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hasView <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>condition <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>viewContainer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hasView <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="管道"><a href="#管道" class="header-anchor">#</a> 管道</h3> <p>你可以将管道理解成将数据处理之后再显示的一种操作符，如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ birthday}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ birthday | date }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--链式调用管道--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ birthday | date | uppercase}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="angular内置的管道："><a href="#angular内置的管道：" class="header-anchor">#</a> angular内置的管道：</h4> <p>DatePipe、UpperCasePipe、LowerCasePipe、CurrencyPipe 和 PercentPipe.......</p> <h4 id="自定义管道"><a href="#自定义管道" class="header-anchor">#</a> 自定义管道</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'exponentialStrength'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExponentialStrengthPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> number<span class="token punctuation">,</span> exponent<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span>
    <span class="token keyword">let</span> exp <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> exp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="纯-pure-管道与非纯-impure-管道"><a href="#纯-pure-管道与非纯-impure-管道" class="header-anchor">#</a> 纯(pure)管道与非纯(impure)管道</h4> <ol><li><p>Angular 只有在它检测到输入值发生了<font color="red">纯变更</font>时才会执行<font color="red">纯管道</font>。 <font color="red">纯变更</font>是指对原始类型值(String、Number、Boolean、Symbol)的更改， 或者对对象引用(Date、Array、Function、Object)的更改。</p></li> <li><p>Angular 会在每个组件的变更检测周期中执行<font color="red">非纯管道</font>。 非纯管道可能会被调用很多次，和每个按键或每次鼠标移动一样频繁。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'flyingHeroesImpure'</span><span class="token punctuation">,</span>
  pure<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FlyingHeroesImpurePipe</span> <span class="token keyword">extends</span> <span class="token class-name">FlyingHeroesPipe</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h2> <p>依赖注入是实现控制反转的一种方式，将对象的创造权交出去，它的好处可以在实际开发中体现出来，以下会介绍它</p> <h3 id="angular实现控制反转的手段就是依赖注入"><a href="#angular实现控制反转的手段就是依赖注入" class="header-anchor">#</a> angular实现控制反转的手段就是依赖注入</h3> <h3 id="依赖注入的好处："><a href="#依赖注入的好处：" class="header-anchor">#</a> 依赖注入的好处：</h3> <p>依赖注入会让你用一种松耦合的方式去写代码，易于调试：</p> <p>举个例子：</p> <p>当你的服务分为开发版本与线上版本时，你可能需要两个不同的服务devDataSevice与proDataSevice,
当你不使用依赖注入时，你需要在多个组件中new 出这两个对象来使用这两个服务，在线上环境与测试环境之间切换时，你需要更改多个组件中的代码，如果使用依赖注入的形式，你只需要更改提供器中的代码就可以更改所有组件中的服务，这大大降低了代码的耦合程度并且提高了可维护性。</p> <h3 id="首先创建一个服务"><a href="#首先创建一个服务" class="header-anchor">#</a> 首先创建一个服务</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HeroService</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="服务提供商（注入器）"><a href="#服务提供商（注入器）" class="header-anchor">#</a> 服务提供商（注入器）</h3> <p>在哪里书写服务提供商：</p> <ol><li><p><font color="red">在服务本身的 @Injectable() 装饰器中的 providedIn 的元数据选项</font></p> <p>providedIn的值可以是'root'或者某个特定的NgModule</p></li> <li><p><font color="red">在 NgModule 的 @NgModule() 装饰器中的providers元数据选项</font></p></li> <li><p><font color="red">在组件的 @Component() 装饰器中providers元数据选项</font></p></li> <li><p><font color="red">在指令的 @Directive() 装饰器中providers元数据选项</font>（元素级注入器）</p></li></ol> <p>providers中如何书写：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>provider<span class="token punctuation">:</span><span class="token punctuation">[</span>ProductService<span class="token punctuation">]</span>
provider<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>provide<span class="token punctuation">:</span>ProductService<span class="token punctuation">,</span>useClass<span class="token punctuation">:</span>ProductService<span class="token punctuation">}</span><span class="token punctuation">]</span>
provider<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>provide<span class="token punctuation">:</span>ProductService<span class="token punctuation">,</span>useClass<span class="token punctuation">:</span>AnotherProductService<span class="token punctuation">}</span><span class="token punctuation">]</span>
provider<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>provide<span class="token punctuation">:</span>ProductService<span class="token punctuation">,</span><span class="token function-variable function">useFactory</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token parameter">参数<span class="token constant">A</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> ob<span class="token punctuation">}</span><span class="token punctuation">,</span>deps<span class="token punctuation">:</span><span class="token punctuation">[</span>参数<span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
provider<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>provide<span class="token punctuation">:</span><span class="token string">&quot;IS_DEV_ENV&quot;</span><span class="token punctuation">,</span>useValue<span class="token punctuation">:</span><span class="token punctuation">{</span>isDev<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="注入器冒泡"><a href="#注入器冒泡" class="header-anchor">#</a> 注入器冒泡</h3> <ol><li>Angular 会尝试寻找该组件自己的注入器</li> <li>如果该组件的注入器没有找到对应的提供商，它就去寻找它父组件的注入器直到 Angular 找到一个合法的注入器或者超出了组件树中的祖先位置为止。</li> <li>如果超出了组件树中的祖先还未找到，Angular 就会抛出一个错误。</li></ol> <h3 id="注入服务："><a href="#注入服务：" class="header-anchor">#</a> 注入服务：</h3> <p>在构造函数中注入：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> productService<span class="token punctuation">:</span>ProductService</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol><li><font color="red">@Optional()</font>是对productService的装饰器，当找不到服务的提供商时，参数值设为null</li> <li><font color="red">@Host()</font> 装饰器会禁止在宿主组件以上的搜索。宿主组件通常就是请求该依赖的那个组件。 不过，当该组件投影进某个父组件时，那个父组件就会变成宿主。</li> <li><font color="red"> @Inject()</font>自定义提供商</li> <li><font color="red"> @Self()</font> 和 <font color="red"> @SkipSelf()</font> 来修改提供商的搜索方式</li></ol> <h2 id="angular-router路由"><a href="#angular-router路由" class="header-anchor">#</a> @angular/router路由</h2> <ol><li>设置base标签,告诉路由该如何合成导航</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--index.html中的head标签中加入&lt;base href=&quot;/&quot;&gt;来告诉路由该如何合成导航用的 URL--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>导入路由配置</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//app.module.ts</span>
<span class="token comment">//导入路由核心模块</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Routes<span class="token punctuation">,</span> RouterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes<span class="token punctuation">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>path<span class="token punctuation">:</span><span class="token string">'**'</span><span class="token punctuation">,</span>component<span class="token punctuation">:</span>AComponent<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="routes路由配置介绍"><a href="#routes路由配置介绍" class="header-anchor">#</a> Routes路由配置介绍</h3> <ol><li><p>path &quot;**&quot;表示匹配所有</p></li> <li><p>redirectTo &quot;表示要转走的路径&quot;</p></li> <li><p>pathMatch &quot;full&quot;表示匹配程度</p></li> <li><p>component 表示要显示的组件</p></li> <li><p>data 数据传递</p></li> <li><p>children:[] 子路由</p></li> <li><p>canActivate:[PermissionGuard]</p></li> <li><p>canDeactivate:[FocusGuard]</p></li> <li><p>resolve:{Stock:StockResolve}</p></li> <li><p>outlet 辅助路由</p></li> <li><p>设置导航输出位置</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>outlet<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>outlet<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Routed components go here <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="路由跳转"><a href="#路由跳转" class="header-anchor">#</a> 路由跳转</h3> <ol><li>声明式跳转</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>['/path']<span class="token punctuation">&quot;</span></span> <span class="token attr-name">routerLinkActive</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>routelink<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>['./path']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>routelink<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>['{outlets:{aux:'aaa'}}']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>routelink<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> 辅助路由 
http://localhost:4200/a(aux:aaa)
</code></pre></div><ol start="2"><li>命令式跳转</li></ol> <p>Router可调用navigate与navigateByUrl()</p> <h3 id="路由数据传递："><a href="#路由数据传递：" class="header-anchor">#</a> 路由数据传递：</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.</span>
<span class="token punctuation">[</span>routerLink<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;['/path',1]&quot;</span>
<span class="token comment">//http://localhost:4200/path/1</span>
<span class="token comment">// this.routeInfo.snapshot.queryParams</span>
<span class="token comment">//2.</span>
<span class="token punctuation">[</span>routerLink<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;['/b',1]&quot;</span> <span class="token punctuation">[</span>queryParams<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;{id:3}&quot;</span>
<span class="token comment">// http://localhost:4200/b/1?id=3</span>
<span class="token comment">// this.routeInfo.snapshot.params</span>
<span class="token comment">// 3.</span>
<span class="token punctuation">{</span>path<span class="token punctuation">:</span><span class="token string">'a'</span><span class="token punctuation">,</span>component<span class="token punctuation">:</span>AComponent<span class="token punctuation">,</span>data<span class="token punctuation">:</span><span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">}</span> 
<span class="token comment">//this.routeInfo.snapshot.queryParams</span>
<span class="token comment">//this.routeInfo.snapshot.data</span>
</code></pre></div><h3 id="activatedroute-常用：this-routeinfo见上面"><a href="#activatedroute-常用：this-routeinfo见上面" class="header-anchor">#</a> ActivatedRoute 常用：this.routeInfo见上面</h3> <h2 id="守卫路由"><a href="#守卫路由" class="header-anchor">#</a> 守卫路由</h2> <h3 id="_1-canactivate"><a href="#_1-canactivate" class="header-anchor">#</a> 1.canActivate</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PermissionGuard</span> <span class="token keyword">implements</span> <span class="token class-name">CanActivate</span><span class="token punctuation">{</span>
  <span class="token function">canActivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> hasPemission<span class="token punctuation">:</span>boolean <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> hasPemission<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-candeactivate"><a href="#_2-candeactivate" class="header-anchor">#</a> 2.canDeactivate</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FocusGuard</span> <span class="token keyword">implements</span> <span class="token class-name">CanDeactivate</span><span class="token operator">&lt;</span>CComponent<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">:</span>CComponent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>isFoucs<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'不关注一下嘛？'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-resolve-读取数据前"><a href="#_3-resolve-读取数据前" class="header-anchor">#</a> 3.resolve 读取数据前</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StockResolve</span> <span class="token keyword">implements</span> <span class="token class-name">Resolve</span><span class="token operator">&lt;</span>Stock<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token keyword">private</span> route<span class="token punctuation">:</span>Router</span>
  <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">route<span class="token punctuation">:</span>ActivatedRouteSnapshot<span class="token punctuation">,</span>state<span class="token punctuation">:</span>RouterStateSnapshot</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Stock</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="生命周期钩子"><a href="#生命周期钩子" class="header-anchor">#</a> 生命周期钩子</h2> <p>当 Angular的<font color="red"> 组件</font>或<font color="red">指令</font>， 新建、更新和销毁时所触发的钩子函数</p> <h3 id="钩子函数的执行顺序"><a href="#钩子函数的执行顺序" class="header-anchor">#</a> 钩子函数的执行顺序</h3> <ol><li>constructor 这个不是生命周期钩子，但是它一定是最先执行的</li> <li>ngOnChanges 输入属性被赋值时调用 (不可变对象的改变)</li> <li>ngOnInit 第一次显示数据绑定和设置指令/组件的输入属性之后</li> <li>ngDoCheck 在每个变更检测周期中，紧跟在 ngOnChanges() 和 ngOnInit() 后面调用</li> <li>ngAfterContentInit 外部内容投影进组件/指令的视图之后调用</li> <li>ngAfterContentChecked 投影组件内容的变更检测之后调用</li> <li>ngAfterViewInit 初始化完组件视图及其子视图之后调用</li> <li>ngAfterViewChecked 组件视图和子视图的变更检测之后调用</li> <li>ngOnDestroy 次销毁指令/组件之前调用</li></ol> <h3 id="初始化阶段"><a href="#初始化阶段" class="header-anchor">#</a> 初始化阶段</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.constructor </span>
<span class="token comment">//2.ngOnChanges</span>
<span class="token comment">//3.ngOnInit</span>
<span class="token comment">//4.ngDoCheck</span>
<span class="token comment">//5.ngAfterContentInit</span>
<span class="token comment">//6.ngAfterContentChecked</span>
<span class="token comment">//7.ngAfterViewInit</span>
<span class="token comment">//8.ngAfterViewChecked</span>
</code></pre></div><h3 id="变化阶段"><a href="#变化阶段" class="header-anchor">#</a> 变化阶段</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.ngOnChanges</span>
<span class="token comment">//2.ngDoCheck</span>
<span class="token comment">//3.ngAfterContentChecked</span>
<span class="token comment">//4.ngAfterViewChecked</span>
</code></pre></div><h3 id="组件销毁阶段"><a href="#组件销毁阶段" class="header-anchor">#</a> 组件销毁阶段</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.ngOnDestroy</span>
<span class="token comment">// 在路由变更时改变</span>
</code></pre></div><h3 id="ngafterviewinit-ngafterviewchecked"><a href="#ngafterviewinit-ngafterviewchecked" class="header-anchor">#</a> ngAfterViewInit,ngAfterViewChecked</h3> <ol><li>子组件组装好父组件才会组装</li> <li>组件是在试图组装完毕调用</li> <li>再此方法中不可以更改视图数据</li></ol> <h3 id="ngaftercontentinit-ngaftercontentchecked，投影"><a href="#ngaftercontentinit-ngaftercontentchecked，投影" class="header-anchor">#</a> ngAfterContentInit,ngAfterContentChecked，投影</h3> <div class="language-html extra-class"><pre class="language-html"><code>1.子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-content</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-content</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
2.父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SComponent</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--在此写入的东西会投影到子组件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="表单"><a href="#表单" class="header-anchor">#</a> 表单</h2> <ol><li>ReactiveFormsModule响应式表单</li> <li>FormsModule模板式表单</li></ol> <h3 id="模板式表单"><a href="#模板式表单" class="header-anchor">#</a> 模板式表单</h3> <ol><li>在angular中会自动加上ngForm来处理表单，如果不用angular来处理则加上ngNoForm</li> <li>在表单中加上#myForm=&quot;ngForm&quot;,则可以在页面使用{ {myForm.value | json } }去检测表单中有ngModule的value 对象名为name值</li></ol> <h4 id="ngform-对应-formgroup"><a href="#ngform-对应-formgroup" class="header-anchor">#</a> NgForm 对应 FormGroup</h4> <h4 id="ngmodel-对应-formcontrol"><a href="#ngmodel-对应-formcontrol" class="header-anchor">#</a> ngModel 对应  FormControl</h4> <h4 id="ngmodelgroup-对应-formarray"><a href="#ngmodelgroup-对应-formarray" class="header-anchor">#</a> ngModelGroup 对应  FormArray</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">#myForm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ngForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/regist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">(ngSubmit)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>createUser(myForm.value)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ngModel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[a-zA-Z0-9]+<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    second:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ngModel</span> <span class="token attr-name">#second</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ngModel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[a-zA-Z0-9]+<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ngModel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[a-zA-Z0-9]+<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ngModelGroup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ngModel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ngModel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  {{myForm.value | json}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  second值是：{{second.value}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="响应式表单"><a href="#响应式表单" class="header-anchor">#</a> 响应式表单</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">private</span> nickName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> passwordInfo <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token class-name">FormGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  password<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  passwordConfirm<span class="token punctuation">:</span><span class="token keyword">new</span>  <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> email <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">'a@a.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">'b@b.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="formcontrol"><a href="#formcontrol" class="header-anchor">#</a> FormControl</h4> <p>管理单体表单控件的值和有效性状态</p> <h4 id="formgroup"><a href="#formgroup" class="header-anchor">#</a> FormGroup</h4> <p>管理一组 AbstractControl 实例的值和有效性状态</p> <h4 id="formarray"><a href="#formarray" class="header-anchor">#</a> FormArray</h4> <p>管理一组 AbstractControl 实例的值和有效性状态</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">[formGroup]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>formModel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/regist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">(Submit)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>createUser()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>  <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nikname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">formArrayName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>emails<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>let email of formModel.get('emails').controls;let i = index;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">[formControlName]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token punctuation">&gt;</span></span>增加email.....<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>  <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>emails<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">formGroupName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>passwordInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>passwordConfirm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="formbuilder快捷语法"><a href="#formbuilder快捷语法" class="header-anchor">#</a> FormBuilder快捷语法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">private</span> formModel<span class="token punctuation">:</span>FormGroup<span class="token punctuation">;</span>
<span class="token keyword">private</span> fb<span class="token punctuation">:</span>FormBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*this.formModel = new FormGroup({
  nikname:new FormControl(),
  emails:new FormArray([
      new FormControl()
  ]),
  mobile:new FormControl(),
  passwordInfo:new FormGroup({
    password:new FormControl(),
    passwordConfirm:new FormControl()
  })
});*/</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>formModel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nikname<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  emails<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  mobile<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  passwordInfo<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    password<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    passwordConfirm<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="angular表单-校验器"><a href="#angular表单-校验器" class="header-anchor">#</a> angular表单 校验器</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token comment">//自定义校验器</span>
  <span class="token function">xxx</span><span class="token punctuation">(</span>param<span class="token punctuation">:</span>AbstractControl<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">[</span>key<span class="token punctuation">:</span>string<span class="token punctuation">]</span><span class="token punctuation">:</span>any<span class="token punctuation">}</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// eg:</span>
  <span class="token function">moblieValid</span><span class="token punctuation">(</span>moblie<span class="token punctuation">:</span>FormControl<span class="token punctuation">)</span><span class="token punctuation">:</span>any<span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token comment">// return null;表示成功</span>
    <span class="token comment">// return {...};不成功</span>
  <span class="token punctuation">}</span>
  
  
  <span class="token comment">//预定义校验器</span>
  Validators<span class="token punctuation">.</span>required <span class="token operator">...</span><span class="token operator">...</span>
  nikname<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span>Validators<span class="token punctuation">.</span>required<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span>
  <span class="token keyword">let</span> niknameValid<span class="token punctuation">;</span>boolean <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formModel<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'nikname'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>valid<span class="token punctuation">;</span>
  passwordInfo<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      password<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      passwordConfirm<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>，<span class="token punctuation">{</span>validator<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>passwordValidator<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//一次校验多个字段</span>
    
</code></pre></div><h4 id="显示错误信息"><a href="#显示错误信息" class="header-anchor">#</a> 显示错误信息</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[hidden]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>!formModel.hasError('required','nickname')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="由于文章过于冗长，关于表单，httpclient等内容我将重新开启一篇文章，感谢广大读者的支持。"><a href="#由于文章过于冗长，关于表单，httpclient等内容我将重新开启一篇文章，感谢广大读者的支持。" class="header-anchor">#</a> 由于文章过于冗长，关于表单，httpclient等内容我将重新开启一篇文章，感谢广大读者的支持。</h3></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/public/blog/assets/js/app.e4ea57ce.js" defer></script><script src="/public/blog/assets/js/2.d1dd4e4d.js" defer></script><script src="/public/blog/assets/js/8.5443f788.js" defer></script><script src="/public/blog/assets/js/3.1f730cd9.js" defer></script>
  </body>
</html>
